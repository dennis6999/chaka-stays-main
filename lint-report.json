[{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\scripts\\convert-logo.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\scripts\\create-logo.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\scripts\\generate-icons.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\scripts\\test-notification.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\AdminDashboardSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\AdminRoute.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\CallToAction.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\FeaturedProperties.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\Hero.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ManageCalendarDialog.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchBlockedDates'. Either include it or remove the dependency array.","line":36,"column":8,"nodeType":"ArrayExpression","endLine":36,"endColumn":28,"suggestions":[{"desc":"Update the dependencies array to be: [fetchBlockedDates, isOpen, propertyId]","fix":{"range":[1302,1322],"text":"[fetchBlockedDates, isOpen, propertyId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Calendar } from \"@/components/ui/calendar\";\r\nimport { api } from '@/services/api';\r\nimport { toast } from 'sonner';\r\nimport { Loader2, Trash, X } from 'lucide-react';\r\nimport { addDays, format, isSameDay } from 'date-fns';\r\nimport { DateRange } from \"react-day-picker\";\r\n\r\ninterface ManageCalendarDialogProps {\r\n    propertyId: string | null;\r\n    propertyTitle: string;\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\ninterface BlockedDate {\r\n    id: string;\r\n    start_date: string;\r\n    end_date: string;\r\n    reason?: string;\r\n}\r\n\r\nexport function ManageCalendarDialog({ propertyId, propertyTitle, isOpen, onClose }: ManageCalendarDialogProps) {\r\n    const [blockedDates, setBlockedDates] = useState<BlockedDate[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [selectedRange, setSelectedRange] = useState<DateRange | undefined>();\r\n    const [submitting, setSubmitting] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (isOpen && propertyId) {\r\n            fetchBlockedDates();\r\n            setSelectedRange(undefined);\r\n        }\r\n    }, [isOpen, propertyId]);\r\n\r\n    const fetchBlockedDates = async () => {\r\n        if (!propertyId) return;\r\n        try {\r\n            setLoading(true);\r\n            const data = await api.getBlockedDates(propertyId);\r\n            setBlockedDates(data);\r\n        } catch (error) {\r\n            console.error(\"Failed to fetch blocked dates\", error);\r\n            toast.error(\"Could not load calendar\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleBlockDates = async () => {\r\n        if (!propertyId || !selectedRange?.from || !selectedRange?.to) return;\r\n\r\n        try {\r\n            setSubmitting(true);\r\n            await api.blockDates({\r\n                property_id: propertyId,\r\n                start_date: selectedRange.from,\r\n                end_date: selectedRange.to,\r\n                reason: 'Manual block'\r\n            });\r\n\r\n            toast.success(\"Dates blocked successfully\");\r\n            await fetchBlockedDates();\r\n            setSelectedRange(undefined);\r\n        } catch (error) {\r\n            console.error(\"Failed to block dates\", error);\r\n            toast.error(\"Failed to block these dates\");\r\n        } finally {\r\n            setSubmitting(false);\r\n        }\r\n    };\r\n\r\n    const handleRemoveBlock = async (id: string) => {\r\n        try {\r\n            // Optimistic update\r\n            const previous = blockedDates;\r\n            setBlockedDates(prev => prev.filter(b => b.id !== id));\r\n\r\n            await api.removeBlock(id);\r\n            toast.success(\"Block removed\");\r\n        } catch (error) {\r\n            console.error(\"Failed to remove block\", error);\r\n            toast.error(\"Failed to remove block\");\r\n            fetchBlockedDates(); // Revert on failure\r\n        }\r\n    };\r\n\r\n    // Convert blocked dates to disabled matchers for the calendar\r\n    const disabledDays = blockedDates.map(block => ({\r\n        from: new Date(block.start_date),\r\n        to: new Date(block.end_date)\r\n    }));\r\n\r\n    return (\r\n        <Dialog open={isOpen} onOpenChange={open => !open && onClose()}>\r\n            <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Manage Availability: {propertyTitle}</DialogTitle>\r\n                    <DialogDescription>\r\n                        Select a date range to block it from availability. Guests won't be able to book these dates.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 mt-4\">\r\n                    {/* Calendar Section */}\r\n                    <div className=\"flex flex-col items-center border rounded-lg p-4 bg-card\">\r\n                        <Calendar\r\n                            mode=\"range\"\r\n                            selected={selectedRange}\r\n                            onSelect={setSelectedRange}\r\n                            disabled={disabledDays}\r\n                            fromDate={new Date()}\r\n                            className=\"rounded-md border shadow-sm\"\r\n                            numberOfMonths={1}\r\n                        />\r\n\r\n                        <div className=\"w-full mt-4 space-y-2\">\r\n                            <div className=\"text-sm font-medium\">Selected Range:</div>\r\n                            <div className=\"text-sm text-muted-foreground bg-muted p-2 rounded\">\r\n                                {selectedRange?.from ? (\r\n                                    selectedRange.to ? (\r\n                                        `${format(selectedRange.from, 'MMM d, yyyy')} - ${format(selectedRange.to, 'MMM d, yyyy')}`\r\n                                    ) : (\r\n                                        format(selectedRange.from, 'MMM d, yyyy')\r\n                                    )\r\n                                ) : (\r\n                                    \"No dates selected\"\r\n                                )}\r\n                            </div>\r\n\r\n                            <Button\r\n                                className=\"w-full\"\r\n                                onClick={handleBlockDates}\r\n                                disabled={!selectedRange?.from || !selectedRange?.to || submitting}\r\n                            >\r\n                                {submitting ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : null}\r\n                                Block Dates\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* List of Blocks */}\r\n                    <div className=\"space-y-4\">\r\n                        <h3 className=\"font-semibold text-lg flex items-center justify-between\">\r\n                            Blocked Periods\r\n                            {loading && <Loader2 className=\"h-4 w-4 animate-spin\" />}\r\n                        </h3>\r\n\r\n                        <div className=\"space-y-3 max-h-[400px] overflow-y-auto pr-2\">\r\n                            {blockedDates.length === 0 && !loading && (\r\n                                <div className=\"text-center py-8 text-muted-foreground bg-muted/30 rounded-lg border border-dashed\">\r\n                                    <span className=\"block mb-1\">ðŸ“…</span>\r\n                                    No dates blocked manually.\r\n                                </div>\r\n                            )}\r\n\r\n                            {blockedDates.map(block => (\r\n                                <div key={block.id} className=\"flex items-center justify-between p-3 bg-muted/40 rounded-lg border border-border group hover:bg-muted/60 transition-colors\">\r\n                                    <div className=\"text-sm\">\r\n                                        <span className=\"font-medium\">\r\n                                            {format(new Date(block.start_date), 'MMM d, yyyy')}\r\n                                        </span>\r\n                                        <span className=\"text-muted-foreground mx-2\">â†’</span>\r\n                                        <span className=\"font-medium\">\r\n                                            {format(new Date(block.end_date), 'MMM d, yyyy')}\r\n                                        </span>\r\n                                        {block.reason && (\r\n                                            <div className=\"text-xs text-muted-foreground mt-0.5\">{block.reason}</div>\r\n                                        )}\r\n                                    </div>\r\n                                    <Button\r\n                                        variant=\"ghost\"\r\n                                        size=\"icon\"\r\n                                        className=\"h-8 w-8 text-muted-foreground hover:text-destructive hover:bg-destructive/10 opacity-0 group-hover:opacity-100 transition-all\"\r\n                                        onClick={() => handleRemoveBlock(block.id)}\r\n                                    >\r\n                                        <Trash className=\"h-4 w-4\" />\r\n                                    </Button>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\Map.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\MapSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\MobileNav.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\Navbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\NotificationDropdown.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\PropertyCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\PropertyCardSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\PropertyDetailSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ProtectedRoute.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ReviewForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1406,1409],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1406,1409],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Star } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { toast } from 'sonner';\r\nimport { api } from '@/services/api';\r\n\r\ninterface ReviewFormProps {\r\n    propertyId: string;\r\n    userId: string;\r\n    onReviewSubmitted: () => void;\r\n}\r\n\r\nconst ReviewForm: React.FC<ReviewFormProps> = ({ propertyId, userId, onReviewSubmitted }) => {\r\n    const [rating, setRating] = useState(5);\r\n    const [comment, setComment] = useState('');\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n    const [hoveredRating, setHoveredRating] = useState(0);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!comment.trim()) {\r\n            toast.error('Please write a comment');\r\n            return;\r\n        }\r\n\r\n        setIsSubmitting(true);\r\n        try {\r\n            await api.createReview({\r\n                property_id: propertyId,\r\n                user_id: userId,\r\n                rating,\r\n                comment\r\n            });\r\n            toast.success('Review submitted successfully!');\r\n            setComment('');\r\n            setRating(5);\r\n            onReviewSubmitted();\r\n        } catch (error: unknown) {\r\n            console.error('Error submitting review:', error);\r\n            const err = error as any;\r\n            if (err.code === '23505' || err.message?.includes('duplicate key')) {\r\n                toast.error('You have already reviewed this property');\r\n            } else {\r\n                toast.error(err.message || 'Failed to submit review');\r\n            }\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"space-y-4 bg-card p-6 rounded-xl border border-border shadow-sm\">\r\n            <h3 className=\"text-xl font-serif font-bold\">Write a Review</h3>\r\n\r\n            <div className=\"flex flex-col gap-2\">\r\n                <label className=\"text-sm font-medium\">Rating</label>\r\n                <div className=\"flex gap-1\">\r\n                    {[1, 2, 3, 4, 5].map((star) => (\r\n                        <button\r\n                            key={star}\r\n                            type=\"button\"\r\n                            className=\"focus:outline-none transition-transform hover:scale-110\"\r\n                            onMouseEnter={() => setHoveredRating(star)}\r\n                            onMouseLeave={() => setHoveredRating(0)}\r\n                            onClick={() => setRating(star)}\r\n                        >\r\n                            <Star\r\n                                className={`w-8 h-8 ${star <= (hoveredRating || rating)\r\n                                    ? 'fill-yellow-400 text-yellow-400'\r\n                                    : 'text-muted-foreground'\r\n                                    }`}\r\n                            />\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n                <label htmlFor=\"comment\" className=\"text-sm font-medium\">Your Experience</label>\r\n                <Textarea\r\n                    id=\"comment\"\r\n                    placeholder=\"Tell us about your stay...\"\r\n                    value={comment}\r\n                    onChange={(e) => setComment(e.target.value)}\r\n                    rows={4}\r\n                    className=\"resize-none\"\r\n                />\r\n            </div>\r\n\r\n            <Button type=\"submit\" disabled={isSubmitting} className=\"w-full sm:w-auto\">\r\n                {isSubmitting ? 'Submitting...' : 'Post Review'}\r\n            </Button>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default ReviewForm;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\SEO.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ScrollToTop.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\SearchForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ServicesSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\Testimonials.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\aspect-ratio.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\badge.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":36,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":36,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\breadcrumb.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\button.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":56,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":56,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-95 transition-transform duration-100 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n  VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\carousel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\chart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\command.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":24,"column":11,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":24,"endColumn":29,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[701,752],"text":"type CommandDialogProps = DialogProps"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\ninterface CommandDialogProps extends DialogProps {}\n\nconst CommandDialog = ({ children, ...props }: CommandDialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\context-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\form.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":168,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":168,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  ControllerProps,\n  FieldPath,\n  FieldValues,\n  FormProvider,\n  useFormContext,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message) : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\hover-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\input-otp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\menubar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\navigation-menu.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":119,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":119,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\resizable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\sidebar.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":760,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":760,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport { Sheet, SheetContent } from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar:state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContext = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContext | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContext>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden md:block text-sidebar-foreground\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex min-h-svh flex-1 flex-col bg-background\",\n        \"peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"rounded-md h-8 flex gap-2 px-2 items-center\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 flex-1 max-w-[--skeleton-width]\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\sonner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\textarea.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":5,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":5,"endColumn":31,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[73,159],"text":"type TextareaProps = React.TextareaHTMLAttributes<HTMLTextAreaElement>"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport interface TextareaProps\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\toaster.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\toggle-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\toggle.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":43,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":43,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3\",\n        sm: \"h-9 px-2.5\",\n        lg: \"h-11 px-5\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\components\\ui\\use-toast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\config\\google.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\contexts\\AuthContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":196,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":196,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useState, useEffect } from 'react';\nimport { supabase } from '@/lib/supabase';\nimport { Session, User, AuthError } from '@supabase/supabase-js';\n\n// Extend the Supabase User type or define a wrapper if needed\n// For now, we'll use a custom interface that maps Supabase user to our app's needs\ninterface AppUser {\n  id: string; // Supabase uses UUID strings\n  email?: string;\n  name?: string;\n  avatar_url?: string;\n  user_type?: 'guest' | 'host';\n  phone?: string;\n  is_admin?: boolean;\n}\n\ninterface RegisterData {\n  email: string;\n  password: string;\n  full_name: string;\n  user_type: 'guest' | 'host';\n  phone?: string;\n}\n\ninterface AuthContextType {\n  user: AppUser | null;\n  session: Session | null;\n  loading: boolean;\n  login: (email: string, password: string) => Promise<{ error: AuthError | null }>;\n  register: (data: RegisterData) => Promise<{ error: AuthError | null }>;\n  logout: () => Promise<void>;\n  isAuthenticated: boolean;\n  loginWithGoogle: () => Promise<void>;\n  refreshUser: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [user, setUser] = useState<AppUser | null>(null);\n  const [session, setSession] = useState<Session | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Check active session\n    supabase.auth.getSession().then(({ data: { session } }) => {\n      setSession(session);\n      if (session?.user) {\n        fetchProfile(session.user);\n      } else {\n        setLoading(false);\n      }\n    });\n\n    // Listen for changes\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange((_event, session) => {\n      setSession(session);\n      if (session?.user) {\n        // Only set loading to true if we don't already have the user data for this ID\n        // This prevents flickering on token refreshes\n        if (user?.id !== session.user.id) {\n          setLoading(true);\n          fetchProfile(session.user);\n        }\n      } else {\n        setUser(null);\n        setLoading(false);\n      }\n    });\n\n    return () => subscription.unsubscribe();\n  }, [user?.id]);\n\n  const fetchProfile = async (authUser: User) => {\n    try {\n      const { data, error } = await supabase\n        .from('profiles')\n        .select('*')\n        .eq('id', authUser.id)\n        .single();\n\n      if (error) {\n        console.error('Error fetching profile:', error);\n        // Fallback to metadata if profile doesn't exist yet\n        setUser({\n          id: authUser.id,\n          email: authUser.email,\n          name: authUser.user_metadata?.full_name,\n          avatar_url: authUser.user_metadata?.avatar_url,\n          user_type: authUser.user_metadata?.role || 'guest',\n          is_admin: false,\n        });\n      } else {\n        setUser({\n          id: data.id,\n          email: authUser.email,\n          name: data.full_name,\n          avatar_url: data.avatar_url,\n          user_type: data.role || 'guest',\n          phone: data.phone,\n          is_admin: data.is_admin, // Map the admin flag\n        });\n      }\n    } catch (error) {\n      console.error('Unexpected error fetching profile:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const login = async (email: string, password: string) => {\n    const { error } = await supabase.auth.signInWithPassword({\n      email,\n      password,\n    });\n    return { error };\n  };\n\n  const register = async (data: RegisterData) => {\n    const { email, password, full_name, user_type, phone } = data;\n\n    // 1. Sign up the user\n    const { data: authData, error: signUpError } = await supabase.auth.signUp({\n      email,\n      password,\n      options: {\n        emailRedirectTo: window.location.origin + '/auth',\n        data: {\n          full_name,\n          role: user_type, // Persist role in metadata as fallback\n          phone,\n        },\n      },\n    });\n\n    if (signUpError) return { error: signUpError };\n\n    // 2. Create/Update profile entry (Fallback if Trigger misses metadata)\n    if (authData.user) {\n      const updates: Record<string, unknown> = {};\n      if (phone) updates.phone = phone;\n      if (user_type) updates.role = user_type;\n\n      if (Object.keys(updates).length > 0) {\n        const { error: profileError } = await supabase\n          .from('profiles')\n          .update(updates)\n          .eq('id', authData.user.id);\n\n        if (profileError) {\n          console.error('Error updating profile metadata:', profileError);\n        }\n      }\n    }\n\n    return { error: null };\n  };\n\n  const logout = async () => {\n    await supabase.auth.signOut();\n    setUser(null);\n    setSession(null);\n  };\n\n  const loginWithGoogle = async () => {\n    const { error } = await supabase.auth.signInWithOAuth({\n      provider: 'google',\n      options: {\n        redirectTo: `${window.location.origin}/dashboard`,\n      },\n    });\n    if (error) throw error;\n  };\n\n  const value = {\n    user,\n    session,\n    loading,\n    login,\n    register,\n    logout,\n    isAuthenticated: !!session,\n    loginWithGoogle,\n    refreshUser: async () => {\n      if (session?.user) {\n        await fetchProfile(session.user);\n      }\n    }\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n};\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}; ","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\hooks\\use-mobile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\hooks\\use-toast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\lib\\supabase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\pages\\About.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\pages\\AdminDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":183,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":183,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7575,7578],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7575,7578],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport {\n    Users, Home, Calendar, TrendingUp, ShieldAlert, LogOut,\n    Trash2, Search, MapPin, Menu, Ban, CheckCircle, MoreHorizontal\n} from 'lucide-react';\nimport { api, Property } from '../services/api';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'sonner';\nimport { Badge } from '@/components/ui/badge';\nimport { Input } from '@/components/ui/input';\nimport { AdminDashboardSkeleton } from '@/components/AdminDashboardSkeleton';\nimport {\n    DropdownMenu,\n    DropdownMenuContent,\n    DropdownMenuItem,\n    DropdownMenuSeparator,\n    DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Sheet, SheetContent, SheetTrigger } from \"@/components/ui/sheet\";\n\nimport {\n    AlertDialog,\n    AlertDialogAction,\n    AlertDialogCancel,\n    AlertDialogContent,\n    AlertDialogDescription,\n    AlertDialogFooter,\n    AlertDialogHeader,\n    AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\n\ninterface UserProfile {\n    id: string;\n    email?: string;\n    full_name?: string;\n    is_admin?: boolean;\n    created_at: string;\n    role?: string;\n}\n\nconst AdminDashboard: React.FC = () => {\n    const { user, logout } = useAuth();\n    const navigate = useNavigate();\n    const [isLoading, setIsLoading] = useState(true);\n    const [stats, setStats] = useState({ users: 0, properties: 0, bookings: 0, revenue: 0 });\n    const [usersList, setUsersList] = useState<UserProfile[]>([]);\n    const [propertiesList, setPropertiesList] = useState<Property[]>([]);\n    const [activeView, setActiveView] = useState<'overview' | 'users' | 'properties'>('overview');\n    const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n\n    // Dialog State\n    const [dialogOpen, setDialogOpen] = useState(false);\n    const [actionType, setActionType] = useState<'delete' | 'ban' | 'unban' | null>(null);\n    const [selectedProperty, setSelectedProperty] = useState<{ id: string, title: string } | null>(null);\n\n    useEffect(() => {\n        fetchAdminData();\n    }, []);\n\n    const fetchAdminData = async () => {\n        try {\n            setIsLoading(true);\n            const [adminStats, allUsers, allProperties] = await Promise.all([\n                api.getAdminStats(),\n                api.getAllUsers(),\n                api.getProperties()\n            ]);\n\n            setStats(adminStats);\n            setUsersList(allUsers || []);\n            setPropertiesList(allProperties || []);\n        } catch (error: unknown) {\n            console.error(\"Admin Load Error\", error);\n            const msg = (error as Error)?.message || \"Unknown error\";\n            toast.error(`Failed to load admin data: ${msg}`);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    // Open Dialog handlers\n    const confirmDelete = (id: string, title: string) => {\n        setSelectedProperty({ id, title });\n        setActionType('delete');\n        setDialogOpen(true);\n    };\n\n    const confirmBanStatus = (id: string, currentStatus: boolean, title: string) => {\n        setSelectedProperty({ id, title });\n        setActionType(currentStatus ? 'unban' : 'ban');\n        setDialogOpen(true);\n    };\n\n    // Execute logic\n    const handleExecuteAction = async () => {\n        if (!selectedProperty || !actionType) return;\n\n        const { id, title } = selectedProperty;\n\n        try {\n            if (actionType === 'delete') {\n                await api.deleteProperty(id);\n                setPropertiesList(prev => prev.filter(p => p.id !== id));\n                toast.success(\"Property permanently deleted\");\n                refreshStats();\n            } else if (actionType === 'ban') {\n                await api.toggleBanProperty(id, true);\n                setPropertiesList(prev => prev.map(p => p.id === id ? { ...p, is_banned: true } : p));\n                toast.success(\"Property BANNED successfully\");\n            } else if (actionType === 'unban') {\n                await api.toggleBanProperty(id, false);\n                setPropertiesList(prev => prev.map(p => p.id === id ? { ...p, is_banned: false } : p));\n                toast.success(\"Property Unbanned successfully\");\n            }\n        } catch (error: unknown) {\n            console.error(\"Action failed\", error);\n            const msg = (error as Error)?.message || \"Unknown error\";\n            toast.error(`Action failed: ${msg}`);\n        } finally {\n            setDialogOpen(false);\n            setSelectedProperty(null);\n            setActionType(null);\n        }\n    };\n\n    const refreshStats = async () => {\n        const adminStats = await api.getAdminStats();\n        setStats(adminStats);\n    };\n\n    const handleLogout = () => {\n        logout();\n        navigate('/');\n    };\n\n    // --- Components ---\n\n    const SidebarContent = () => (\n        <div className=\"flex flex-col h-full bg-slate-900 text-slate-300\">\n            <div className=\"p-6 flex items-center gap-3 text-white border-b border-white/10\">\n                <ShieldAlert className=\"h-6 w-6 text-red-500\" />\n                <span className=\"font-serif font-bold text-xl tracking-wide\">Chaka Admin</span>\n            </div>\n\n            <div className=\"flex-1 py-6 space-y-1 px-3\">\n                <button\n                    onClick={() => { setActiveView('overview'); setIsMobileMenuOpen(false); }}\n                    className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${activeView === 'overview' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-900/50' : 'hover:bg-white/5'}`}\n                >\n                    <TrendingUp className=\"h-5 w-5\" />\n                    <span className=\"font-medium\">Overview</span>\n                </button>\n                <button\n                    onClick={() => { setActiveView('users'); setIsMobileMenuOpen(false); }}\n                    className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${activeView === 'users' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-900/50' : 'hover:bg-white/5'}`}\n                >\n                    <Users className=\"h-5 w-5\" />\n                    <span className=\"font-medium\">Users Management</span>\n                </button>\n                <button\n                    onClick={() => { setActiveView('properties'); setIsMobileMenuOpen(false); }}\n                    className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${activeView === 'properties' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-900/50' : 'hover:bg-white/5'}`}\n                >\n                    <Home className=\"h-5 w-5\" />\n                    <span className=\"font-medium\">Properties</span>\n                </button>\n            </div>\n\n            <div className=\"p-4 border-t border-white/10 space-y-2\">\n                <Button variant=\"ghost\" className=\"w-full justify-start text-slate-400 hover:text-white hover:bg-white/5\" onClick={() => navigate('/')}>\n                    <TrendingUp className=\"h-4 w-4 mr-2\" /> View Live Site\n                </Button>\n                <Button variant=\"ghost\" className=\"w-full justify-start text-red-400 hover:text-red-300 hover:bg-red-500/10\" onClick={handleLogout}>\n                    <LogOut className=\"h-4 w-4 mr-2\" /> Sign Out\n                </Button>\n            </div>\n        </div>\n    );\n\n    const StatCard = ({ title, value, icon: Icon, colorClass, trend }: any) => (\n        <div className=\"bg-white rounded-xl p-6 shadow-sm border border-neutral/10 hover:shadow-md transition-shadow\">\n            <div className=\"flex items-center justify-between mb-4\">\n                <span className=\"text-sm font-medium text-muted-foreground\">{title}</span>\n                <div className={`p-2 rounded-lg ${colorClass} bg-opacity-10`}>\n                    <Icon className={`h-5 w-5 ${colorClass.replace('bg-', 'text-')}`} />\n                </div>\n            </div>\n            <div className=\"text-3xl font-bold text-slate-900\">{value}</div>\n            {trend && <div className=\"text-xs text-green-600 mt-2 font-medium\">{trend}</div>}\n        </div>\n    );\n\n    if (isLoading) {\n        return <AdminDashboardSkeleton />;\n    }\n\n    return (\n        <div className=\"min-h-screen bg-slate-50 flex font-sans\">\n            <AlertDialog open={dialogOpen} onOpenChange={setDialogOpen}>\n                <AlertDialogContent className=\"bg-white border-none shadow-2xl rounded-2xl\">\n                    <AlertDialogHeader>\n                        <AlertDialogTitle className=\"text-xl font-bold text-slate-900\">\n                            {actionType === 'delete' && <span className=\"flex items-center gap-2 text-red-600\"><Trash2 className=\"h-5 w-5\" /> Permanently Delete Property?</span>}\n                            {actionType === 'ban' && <span className=\"flex items-center gap-2 text-amber-600\"><Ban className=\"h-5 w-5\" /> Ban Property?</span>}\n                            {actionType === 'unban' && <span className=\"flex items-center gap-2 text-green-600\"><CheckCircle className=\"h-5 w-5\" /> Unban Property?</span>}\n                        </AlertDialogTitle>\n                        <AlertDialogDescription className=\"text-slate-600 pt-2 text-base\">\n                            {actionType === 'delete' && `Are you sure you want to delete \"${selectedProperty?.title}\"? This action CANNOT be undone and will remove all associated data.`}\n                            {actionType === 'ban' && `This will hide \"${selectedProperty?.title}\" from the public site immediately. You can unban it later.`}\n                            {actionType === 'unban' && `This will make \"${selectedProperty?.title}\" visible to the public again.`}\n                        </AlertDialogDescription>\n                    </AlertDialogHeader>\n                    <AlertDialogFooter className=\"mt-4\">\n                        <AlertDialogCancel className=\"border-slate-200 hover:bg-slate-50 text-slate-700\">Cancel</AlertDialogCancel>\n                        <AlertDialogAction\n                            onClick={handleExecuteAction}\n                            className={`\n                                ${actionType === 'delete' ? 'bg-red-600 hover:bg-red-700' : ''}\n                                ${actionType === 'ban' ? 'bg-amber-600 hover:bg-amber-700 text-white' : ''}\n                                ${actionType === 'unban' ? 'bg-green-600 hover:bg-green-700' : ''}\n                            `}\n                        >\n                            Confirm {actionType === 'delete' ? 'Delete' : actionType === 'ban' ? 'Ban' : 'Unban'}\n                        </AlertDialogAction>\n                    </AlertDialogFooter>\n                </AlertDialogContent>\n            </AlertDialog>\n\n            {/* Desktop Sidebar */}\n            <div className=\"hidden md:block w-64 fixed inset-y-0 z-50 shadow-xl\">\n                <SidebarContent />\n            </div>\n\n            {/* Mobile Sidebar */}\n            <div className=\"md:hidden fixed top-0 w-full z-50 bg-slate-900 text-white p-4 flex justify-between items-center shadow-md\">\n                <div className=\"flex items-center gap-2\">\n                    <ShieldAlert className=\"h-5 w-5 text-red-500\" />\n                    <span className=\"font-bold\">Admin</span>\n                </div>\n                <Sheet open={isMobileMenuOpen} onOpenChange={setIsMobileMenuOpen}>\n                    <SheetTrigger><Menu className=\"h-6 w-6\" /></SheetTrigger>\n                    <SheetContent side=\"left\" className=\"p-0 border-r-0 bg-slate-900 w-64 text-white\">\n                        <SidebarContent />\n                    </SheetContent>\n                </Sheet>\n            </div>\n\n            {/* Main Content */}\n            <main className=\"flex-1 md:ml-64 p-4 md:p-8 pt-20 md:pt-8 overflow-y-auto h-screen\">\n                <div className=\"max-w-7xl mx-auto space-y-8 animate-fade-in\">\n\n                    {/* Header */}\n                    <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n                        <div>\n                            <h1 className=\"text-2xl font-bold text-slate-900\">\n                                {activeView === 'overview' && 'Dashboard Overview'}\n                                {activeView === 'users' && 'User Management'}\n                                {activeView === 'properties' && 'Property Listings'}\n                            </h1>\n                            <p className=\"text-slate-500 text-sm mt-1\">Welcome back, {user?.name || 'Admin'}</p>\n                        </div>\n                        <div className=\"flex items-center gap-3\">\n                            <span className=\"text-xs font-mono bg-white px-3 py-1 rounded-full border shadow-sm text-slate-500\">\n                                v1.2.0-stable\n                            </span>\n                        </div>\n                    </div>\n\n                    {/* Views */}\n                    {activeView === 'overview' && (\n                        <div className=\"space-y-8\">\n                            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\n                                <StatCard title=\"Total Revenue\" value={`KES ${stats.revenue.toLocaleString()}`} icon={TrendingUp} colorClass=\"bg-green-500 text-green-600\" trend=\"+12.5% vs last month\" />\n                                <StatCard title=\"Active Users\" value={stats.users} icon={Users} colorClass=\"bg-blue-500 text-blue-600\" trend=\"+8 new this week\" />\n                                <StatCard title=\"Total Bookings\" value={stats.bookings} icon={Calendar} colorClass=\"bg-purple-500 text-purple-600\" />\n                                <StatCard title=\"Properties\" value={stats.properties} icon={Home} colorClass=\"bg-amber-500 text-amber-600\" />\n                            </div>\n                        </div>\n                    )}\n\n                    {activeView === 'users' && (\n                        <Card className=\"border-0 shadow-lg overflow-hidden\">\n                            <CardHeader className=\"bg-white border-b px-6 py-4\">\n                                <div className=\"flex justify-between items-center\">\n                                    <CardTitle>Registered Users</CardTitle>\n                                    <div className=\"flex gap-2\">\n                                        <Button variant=\"outline\" size=\"sm\">Export CSV</Button>\n                                    </div>\n                                </div>\n                            </CardHeader>\n                            <CardContent className=\"p-0\">\n                                <table className=\"w-full text-sm text-left\">\n                                    <thead className=\"text-xs uppercase bg-slate-50 text-slate-500 font-medium border-b\">\n                                        <tr>\n                                            <th className=\"px-6 py-4\">User Identity</th>\n                                            <th className=\"px-6 py-4\">Contact</th>\n                                            <th className=\"px-6 py-4\">Role</th>\n                                            <th className=\"px-6 py-4\">Status</th>\n                                            <th className=\"px-6 py-4 text-right\">Joined</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody className=\"divide-y divide-slate-100\">\n                                        {usersList.map((u) => (\n                                            <tr key={u.id} className=\"hover:bg-slate-50/50 transition-colors\">\n                                                <td className=\"px-6 py-4\">\n                                                    <div className=\"flex items-center gap-3\">\n                                                        <div className=\"h-9 w-9 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold\">\n                                                            {u.full_name?.charAt(0) || '?'}\n                                                        </div>\n                                                        <div className=\"font-medium text-slate-900\">{u.full_name || 'No Name'}</div>\n                                                    </div>\n                                                </td>\n                                                <td className=\"px-6 py-4 text-slate-500\">{u.email}</td>\n                                                <td className=\"px-6 py-4\">\n                                                    {u.is_admin ?\n                                                        <Badge variant=\"secondary\" className=\"bg-purple-100 text-purple-700 hover:bg-purple-200\">Admin</Badge> :\n                                                        <Badge variant=\"outline\" className=\"text-slate-600\">Guest</Badge>\n                                                    }\n                                                </td>\n                                                <td className=\"px-6 py-4\"><span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700\">Active</span></td>\n                                                <td className=\"px-6 py-4 text-right text-slate-500 font-mono text-xs\">{new Date(u.created_at).toLocaleDateString()}</td>\n                                            </tr>\n                                        ))}\n                                    </tbody>\n                                </table>\n                            </CardContent>\n                        </Card>\n                    )}\n\n                    {activeView === 'properties' && (\n                        <div className=\"space-y-6\">\n                            <div className=\"flex justify-between items-center bg-white p-4 rounded-lg shadow-sm border\">\n                                <div className=\"relative w-72\">\n                                    <Search className=\"absolute left-3 top-2.5 h-4 w-4 text-slate-400\" />\n                                    <Input placeholder=\"Search properties...\" className=\"pl-9 bg-slate-50 border-slate-200\" />\n                                </div>\n                                <div className=\"flex gap-2\">\n                                    <Button variant=\"outline\" size=\"sm\">Filter</Button>\n                                </div>\n                            </div>\n\n                            <div className=\"grid grid-cols-1 gap-4\">\n                                {propertiesList.map((property) => (\n                                    <div key={property.id} className={`bg-white border rounded-xl p-4 shadow-sm flex flex-col md:flex-row gap-6 transition-all ${property.is_banned ? 'border-red-200 bg-red-50/10' : 'hover:border-indigo-200'}`}>\n                                        <img\n                                            src={property.images?.[0]}\n                                            className={`w-full md:w-48 h-32 object-cover rounded-lg ${property.is_banned ? 'grayscale opacity-70' : ''}`}\n                                            alt=\"Property\"\n                                        />\n\n                                        <div className=\"flex-1 flex flex-col justify-center\">\n                                            <div className=\"flex items-center gap-2 mb-1\">\n                                                <h3 className=\"font-bold text-lg text-slate-900\">{property.title}</h3>\n                                                {property.is_banned && <Badge variant=\"destructive\" className=\"animate-pulse\">BANNED</Badge>}\n                                            </div>\n                                            <div className=\"flex items-center text-slate-500 text-sm mb-3\">\n                                                <MapPin className=\"h-3 w-3 mr-1\" /> {property.location}\n                                                <span className=\"mx-2\">â€¢</span>\n                                                <span className=\"font-medium text-slate-900\">KES {property.price_per_night}</span>\n                                                <span className=\"text-slate-400 text-xs ml-1\">/ night</span>\n                                            </div>\n                                            <div className=\"flex items-center gap-2 text-xs text-slate-400\">\n                                                <span className=\"bg-slate-100 px-2 py-1 rounded\">ID: {property.id.substring(0, 8)}...</span>\n                                                <span>Hosted by {property.host?.full_name || '...'}</span>\n                                            </div>\n                                        </div>\n\n                                        <div className=\"flex md:flex-col justify-end gap-2 border-t md:border-t-0 md:border-l border-slate-100 pt-4 md:pt-0 md:pl-6\">\n                                            <DropdownMenu>\n                                                <DropdownMenuTrigger asChild>\n                                                    <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0 md:hidden ml-auto\">\n                                                        <MoreHorizontal className=\"h-4 w-4\" />\n                                                    </Button>\n                                                </DropdownMenuTrigger>\n                                                <DropdownMenuContent align=\"end\">\n                                                    <DropdownMenuItem onClick={() => confirmBanStatus(property.id, !!property.is_banned, property.title)}>\n                                                        {property.is_banned ? 'Unban Property' : 'Ban Property'}\n                                                    </DropdownMenuItem>\n                                                    <DropdownMenuSeparator />\n                                                    <DropdownMenuItem className=\"text-red-600\" onClick={() => confirmDelete(property.id, property.title)}>\n                                                        Delete Permanently\n                                                    </DropdownMenuItem>\n                                                </DropdownMenuContent>\n                                            </DropdownMenu>\n\n                                            <div className=\"hidden md:flex flex-col gap-2 min-w-[140px]\">\n                                                <Button\n                                                    size=\"sm\"\n                                                    variant={property.is_banned ? \"default\" : \"outline\"}\n                                                    className={property.is_banned ? \"bg-green-600 hover:bg-green-700 border-none\" : \"hover:bg-amber-50 text-amber-700 border-amber-200\"}\n                                                    onClick={() => confirmBanStatus(property.id, !!property.is_banned, property.title)}\n                                                >\n                                                    {property.is_banned ? <><CheckCircle className=\"h-4 w-4 mr-2\" /> Unban</> : <><Ban className=\"h-4 w-4 mr-2\" /> Ban Property</>}\n                                                </Button>\n                                                <Button\n                                                    size=\"sm\"\n                                                    variant=\"ghost\"\n                                                    className=\"text-red-600 hover:text-red-700 hover:bg-red-50\"\n                                                    onClick={() => confirmDelete(property.id, property.title)}\n                                                >\n                                                    <Trash2 className=\"h-4 w-4 mr-2\" /> Delete\n                                                </Button>\n                                            </div>\n                                        </div>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </main>\n        </div>\n    );\n};\n\nexport default AdminDashboard;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\pages\\Auth.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\pages\\Dashboard.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchDashboardData'. Either include it or remove the dependency array.","line":113,"column":6,"nodeType":"ArrayExpression","endLine":113,"endColumn":42,"suggestions":[{"desc":"Update the dependencies array to be: [activeTab, user, loading, navigate, fetchDashboardData]","fix":{"range":[3425,3461],"text":"[activeTab, user, loading, navigate, fetchDashboardData]"}}]},{"ruleId":"prefer-const","severity":2,"message":"'monthlyData' is never reassigned. Use 'const' instead.","line":132,"column":11,"nodeType":"Identifier","messageId":"useConst","endLine":132,"endColumn":77,"fix":{"range":[4001,4077],"text":"const monthlyData: Record<string, { revenue: number; bookings: number }> = {};"}}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { Loader2, Calendar, Home, User, Plus, Edit, Trash, MapPin, Heart, Wallet, DollarSign, TrendingUp } from 'lucide-react';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport Navbar from '@/components/Navbar';\nimport Footer from '@/components/Footer';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\n\nimport { toast } from 'sonner';\nimport { useNavigate, useLocation } from 'react-router-dom';\n\nimport { api, Property, Booking } from '../services/api';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n  LineChart,\n  Line,\n  AreaChart,\n  Area\n} from 'recharts';\nimport { ManageCalendarDialog } from '@/components/ManageCalendarDialog';\n\nconst Dashboard: React.FC = () => {\n  const { user, loading, logout, refreshUser } = useAuth();\n  const [isLoading, setIsLoading] = useState(true);\n  const [bookings, setBookings] = useState<Booking[]>([]);\n  const [properties, setProperties] = useState<Property[]>([]);\n  const [favorites, setFavorites] = useState<Property[]>([]);\n  const [analytics, setAnalytics] = useState({\n    bookingGrowth: 0,\n    revenueGrowth: 0,\n    totalRevenue: 0,\n    totalSpent: 0,\n    totalTrips: 0,\n    totalHostingBookings: 0,\n    monthlyStats: [] as { name: string; revenue: number; bookings: number }[]\n  });\n  const [activeTab, setActiveTab] = useState('overview');\n\n  // Profile Editing State\n  const [isEditingProfile, setIsEditingProfile] = useState(false);\n  const [profileForm, setProfileForm] = useState({\n    full_name: '',\n    phone: ''\n  });\n\n  const [showAddProperty, setShowAddProperty] = useState(false);\n  const [newProperty, setNewProperty] = useState({\n    name: '',\n    location: '',\n    price: '',\n    description: '',\n    images: [] as string[],\n    max_guests: '2',\n    bedrooms: '1',\n    beds: '1',\n    baths: '1',\n    amenities: [] as string[],\n    property_type: 'Stays'\n  });\n  const [editingId, setEditingId] = useState<string | null>(null);\n\n  // Calendar Dialog State\n  const [calendarProperty, setCalendarProperty] = useState<{ id: string, title: string } | null>(null);\n\n  // Cancellation Dialog State\n  const [bookingToCancel, setBookingToCancel] = useState<string | null>(null);\n  const [isCancelDialogOpen, setIsCancelDialogOpen] = useState(false);\n\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  // Sync Tab with URL\n  useEffect(() => {\n    const params = new URLSearchParams(location.search);\n    const tabParam = params.get('tab');\n    if (tabParam) {\n      setActiveTab(tabParam);\n    }\n  }, [location.search]);\n\n  // ... rest of component\n\n  useEffect(() => {\n    if (loading) return;\n\n    if (!user) {\n      navigate('/auth');\n      return;\n    }\n    fetchDashboardData();\n  }, [activeTab, user, loading, navigate]);\n\n  const fetchDashboardData = async () => {\n    if (!user) return;\n\n    try {\n      setIsLoading(true);\n\n      const userBookings = await api.getUserBookings(user.id);\n      setBookings(userBookings);\n\n      // --- Traveler Analytics ---\n      const myTrips = userBookings.filter(b => b.status !== 'cancelled');\n      const totalSpent = myTrips.reduce((sum, b) => sum + b.total_price, 0);\n\n      // --- Host Analytics ---\n      let hostingRevenue = 0;\n      let totalHostingBookings = 0;\n      let hostProperties: Property[] = [];\n      let monthlyData: Record<string, { revenue: number; bookings: number }> = {};\n\n      try {\n        hostProperties = await api.getHostProperties(user.id);\n        setProperties(hostProperties);\n\n        if (hostProperties.length > 0) {\n          const hostBookings = await api.getHostBookings(user.id);\n          totalHostingBookings = hostBookings.length;\n          hostingRevenue = hostBookings.reduce((sum, b) => sum + b.total_price, 0);\n\n          // Calculate Monthly Stats\n          const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n\n          // Initialize last 6 months\n          for (let i = 5; i >= 0; i--) {\n            const d = new Date();\n            d.setMonth(d.getMonth() - i);\n            const key = `${months[d.getMonth()]}`;\n            monthlyData[key] = { revenue: 0, bookings: 0 };\n          }\n\n          hostBookings.forEach(booking => {\n            const date = new Date(booking.created_at);\n            const monthName = months[date.getMonth()];\n            // Simplified: Just matching by month name for now. Ideally match year too.\n            if (monthlyData[monthName]) {\n              monthlyData[monthName].revenue += booking.total_price;\n              monthlyData[monthName].bookings += 1;\n            }\n          });\n        }\n      } catch (err) {\n        console.error(\"Error fetching host data\", err);\n      }\n\n      // Convert to array\n      const monthlyStats = Object.entries(monthlyData).map(([name, data]) => ({\n        name,\n        revenue: data.revenue,\n        bookings: data.bookings\n      }));\n\n      // --- Favorites ---\n      try {\n        const userFavorites = await api.getUserFavorites(user.id);\n        setFavorites(userFavorites);\n      } catch (err) {\n        console.error(\"Error fetching favorites\", err);\n      }\n\n      setAnalytics({\n        bookingGrowth: 0,\n        revenueGrowth: 0,\n        totalRevenue: hostingRevenue,\n        totalSpent: totalSpent,\n        totalTrips: myTrips.length,\n        totalHostingBookings,\n        monthlyStats\n      });\n\n      if (activeTab === 'properties') {\n        const hostProperties = await api.getHostProperties(user.id);\n        setProperties(hostProperties);\n      }\n    } catch (error) {\n      console.error('Error fetching dashboard data:', error);\n      toast.error('Failed to fetch data');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSaveProperty = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!user) return;\n\n    try {\n      const propertyData = {\n        host_id: user.id,\n        title: newProperty.name,\n        location: newProperty.location,\n        price_per_night: parseFloat(newProperty.price) || 0,\n        description: newProperty.description,\n        images: newProperty.images,\n        amenities: newProperty.amenities,\n        max_guests: parseInt(newProperty.max_guests) || 1,\n        bedrooms: parseInt(newProperty.bedrooms) || 0,\n        beds: parseInt(newProperty.beds) || 1,\n        baths: parseInt(newProperty.baths) || 1,\n        property_type: newProperty.property_type\n      };\n\n      if (editingId) {\n        const updated = await api.updateProperty(editingId, propertyData);\n        setProperties(properties.map(p => p.id === editingId ? updated : p));\n        toast.success('Property updated successfully');\n      } else {\n        const createdProperty = await api.createProperty(propertyData);\n        setProperties([...properties, createdProperty]);\n        toast.success('Property added successfully');\n      }\n\n      closePropertyForm();\n    } catch (error) {\n      console.error('Error saving property:', error);\n      toast.error('Failed to save property');\n    }\n  };\n\n  const handleCancelClick = (bookingId: string) => {\n    setBookingToCancel(bookingId);\n    setIsCancelDialogOpen(true);\n  };\n\n  const handleConfirmCancel = async () => {\n    if (!bookingToCancel) return;\n\n    try {\n      await api.cancelBooking(bookingToCancel);\n      toast.success('Booking cancelled successfully');\n      fetchDashboardData();\n    } catch (error) {\n      console.error('Error cancelling booking:', error);\n      toast.error('Failed to cancel booking');\n    } finally {\n      setIsCancelDialogOpen(false);\n      setBookingToCancel(null);\n    }\n  };\n\n  const handleUpdateProfile = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!user) return;\n\n    try {\n      await api.updateProfile(user.id, profileForm);\n      await refreshUser();\n      setIsEditingProfile(false);\n      toast.success('Profile updated successfully');\n    } catch (error) {\n      console.error('Error updating profile:', error);\n      toast.error('Failed to update profile');\n    }\n  };\n\n  const handleAvatarUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file || !user) return;\n\n    try {\n      toast.info('Uploading avatar...');\n      const url = await api.uploadAvatar(file);\n      await api.updateProfile(user.id, { avatar_url: url });\n      await refreshUser();\n      toast.success('Avatar updated successfully');\n    } catch (error) {\n      console.error('Error uploading avatar:', error);\n      toast.error('Failed to upload avatar');\n    }\n  };\n\n  const closePropertyForm = () => {\n    setShowAddProperty(false);\n    setEditingId(null);\n    setNewProperty({\n      name: '',\n      location: '',\n      price: '',\n      description: '',\n      images: [],\n      max_guests: '2',\n      bedrooms: '1',\n      beds: '1',\n      baths: '1',\n      amenities: [],\n      property_type: 'Stays'\n    });\n  };\n\n  const startEditing = (property: Property) => {\n    setNewProperty({\n      name: property.title,\n      location: property.location,\n      price: property.price_per_night.toString(),\n      description: property.description,\n      images: property.images || [],\n      max_guests: (property.max_guests || 2).toString(),\n      bedrooms: (property.bedrooms || 1).toString(),\n      beds: (property.beds || 1).toString(),\n      baths: (property.baths || 1).toString(),\n      amenities: property.amenities || [],\n      property_type: property.property_type || 'Stays'\n    });\n    setEditingId(property.id);\n    setShowAddProperty(true);\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n\n  const handleLogout = () => {\n    logout();\n    navigate('/');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-slate-50 pb-20\">\n        <Navbar />\n        <main className=\"container mx-auto px-4 py-8 pt-24\">\n          <div className=\"mb-10\">\n            <div className=\"h-48 w-full rounded-3xl overflow-hidden relative bg-slate-200\">\n              <div className=\"absolute inset-0 bg-gradient-to-r from-slate-900 to-slate-800 opacity-90\" />\n              <div className=\"absolute bottom-0 left-0 p-8 w-full\">\n                <Skeleton className=\"h-10 w-96 bg-white/10 mb-2\" />\n                <Skeleton className=\"h-5 w-64 bg-white/10\" />\n                <div className=\"absolute bottom-8 right-8\">\n                  <Skeleton className=\"h-10 w-32 rounded-full bg-white/20\" />\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"space-y-8\">\n            <div className=\"flex gap-8 border-b border-border pb-px\">\n              <Skeleton className=\"h-10 w-24 bg-slate-200\" />\n              <Skeleton className=\"h-10 w-24 bg-slate-200\" />\n              <Skeleton className=\"h-10 w-24 bg-slate-200\" />\n              <Skeleton className=\"h-10 w-24 bg-slate-200\" />\n            </div>\n\n            <div className=\"space-y-10\">\n              <div>\n                <div className=\"flex items-center justify-between mb-6\">\n                  <Skeleton className=\"h-8 w-48 bg-slate-200\" />\n                  <Skeleton className=\"h-4 w-32 bg-slate-200\" />\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n                  {[1, 2, 3, 4].map((i) => (\n                    <div key={i} className=\"bg-white p-6 rounded-xl border border-slate-100 shadow-sm h-32 flex flex-col justify-between\">\n                      <div className=\"flex justify-between\">\n                        <Skeleton className=\"h-4 w-20 bg-slate-100\" />\n                        <Skeleton className=\"h-4 w-4 rounded-full bg-slate-100\" />\n                      </div>\n                      <Skeleton className=\"h-8 w-32 bg-slate-100\" />\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n                <div className=\"bg-white p-6 rounded-xl border border-slate-100 shadow-sm h-[350px]\">\n                  <Skeleton className=\"h-6 w-48 mb-6 bg-slate-100\" />\n                  <Skeleton className=\"h-64 w-full bg-slate-50 rounded-lg\" />\n                </div>\n                <div className=\"bg-white p-6 rounded-xl border border-slate-100 shadow-sm h-[350px]\">\n                  <Skeleton className=\"h-6 w-48 mb-6 bg-slate-100\" />\n                  <Skeleton className=\"h-64 w-full bg-slate-50 rounded-lg\" />\n                </div>\n              </div>\n            </div>\n          </div>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n\n  if (!user) return null;\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-slate-50/50\">\n      <Navbar />\n\n      <main className=\"flex-grow pt-24 pb-16\">\n        <div className=\"chaka-container\">\n          {/* Header / Welcome Section */}\n          <div className=\"relative overflow-hidden rounded-3xl bg-slate-900 text-white p-8 md:p-12 mb-10 shadow-xl\">\n            <div className=\"absolute top-0 right-0 -translate-y-1/2 translate-x-1/3 w-96 h-96 bg-primary/20 rounded-full blur-3xl\" />\n            <div className=\"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-end gap-6\">\n              <div>\n                <p className=\"text-primary-foreground/80 font-medium mb-2 tracking-wide text-sm uppercase\">Host Dashboard</p>\n                <h1 className=\"text-3xl md:text-5xl font-serif font-bold text-white tracking-tight\">Welcome back, {user.name?.split(' ')[0]}</h1>\n                <p className=\"text-slate-300 mt-2 max-w-xl\">Manage your properties, track your earnings, and view your trip history all in one place.</p>\n              </div>\n              <div className=\"flex items-center gap-3\">\n                <Button variant=\"ghost\" onClick={handleLogout} className=\"text-white hover:bg-white/10 hover:text-white\">\n                  Log out\n                </Button>\n                <Button onClick={() => {\n                  setShowAddProperty(true);\n                  setEditingId(null);\n                  setNewProperty({\n                    name: '',\n                    location: '',\n                    price: '',\n                    description: '',\n                    images: [],\n                    max_guests: '2',\n                    bedrooms: '1',\n                    beds: '1',\n                    baths: '1',\n                    amenities: [],\n                    property_type: 'Stays'\n                  });\n                  setActiveTab('properties');\n                }} className=\"bg-white text-slate-900 hover:bg-white/90 font-medium shadow-none border-0\">\n                  <Plus className=\"h-4 w-4 mr-2\" /> List Property\n                </Button>\n              </div>\n            </div>\n          </div>\n\n          <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-8\">\n            <TabsList className=\"w-full justify-start border-b border-border bg-transparent p-0 h-auto rounded-none space-x-8 overflow-x-auto flex-nowrap mb-8\">\n              <TabsTrigger\n                value=\"overview\"\n                className=\"rounded-none border-b-2 border-transparent px-1 py-4 font-medium text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent transition-all text-sm uppercase tracking-wide\"\n              >\n                Overview\n              </TabsTrigger>\n              <TabsTrigger\n                value=\"bookings\"\n                className=\"rounded-none border-b-2 border-transparent px-1 py-4 font-medium text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent transition-all text-sm uppercase tracking-wide\"\n              >\n                Bookings\n              </TabsTrigger>\n              <TabsTrigger\n                value=\"favorites\"\n                className=\"rounded-none border-b-2 border-transparent px-1 py-4 font-medium text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent transition-all text-sm uppercase tracking-wide\"\n              >\n                Favorites\n              </TabsTrigger>\n              <TabsTrigger\n                value=\"properties\"\n                className=\"rounded-none border-b-2 border-transparent px-1 py-4 font-medium text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent transition-all text-sm uppercase tracking-wide\"\n              >\n                My Properties\n              </TabsTrigger>\n              <TabsTrigger\n                value=\"profile\"\n                className=\"rounded-none border-b-2 border-transparent px-1 py-4 font-medium text-muted-foreground hover:text-foreground data-[state=active]:border-primary data-[state=active]:text-primary data-[state=active]:bg-transparent transition-all text-sm uppercase tracking-wide\"\n              >\n                Profile\n              </TabsTrigger>\n            </TabsList>\n\n            {/* Overview Tab */}\n            <TabsContent value=\"overview\" className=\"space-y-10 animate-fade-in\">\n\n              {/* Unified Stats Grid */}\n              <div>\n                <div className=\"flex items-center justify-between mb-6\">\n                  <h3 className=\"text-xl font-bold tracking-tight text-slate-900\">Performance Overview</h3>\n                  <span className=\"text-sm text-slate-500\">Last updated: Just now</span>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n                  {/* Traveler Metrics */}\n                  <Card className=\"border-none shadow-sm bg-white hover:shadow-md transition-all\">\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex items-center justify-between space-y-0 pb-2\">\n                        <p className=\"text-sm font-medium text-slate-500\">My Trips</p>\n                        <Calendar className=\"h-4 w-4 text-slate-400\" />\n                      </div>\n                      <div className=\"flex items-baseline gap-2 mt-2\">\n                        <div className=\"text-2xl font-bold text-slate-900\">{analytics.totalTrips}</div>\n                        <span className=\"text-xs text-slate-500\">bookings</span>\n                      </div>\n                    </CardContent>\n                  </Card>\n\n                  <Card className=\"border-none shadow-sm bg-white hover:shadow-md transition-all\">\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex items-center justify-between space-y-0 pb-2\">\n                        <p className=\"text-sm font-medium text-slate-500\">Invested</p>\n                        <Wallet className=\"h-4 w-4 text-slate-400\" />\n                      </div>\n                      <div className=\"flex items-baseline gap-2 mt-2\">\n                        <div className=\"text-2xl font-bold text-slate-900\">KES {analytics.totalSpent.toLocaleString()}</div>\n                      </div>\n                    </CardContent>\n                  </Card>\n\n                  {/* Host Metrics - Conditional */}\n                  {properties.length > 0 && (\n                    <>\n                      <Card className=\"border-none shadow-sm bg-white hover:shadow-md transition-all bg-gradient-to-br from-purple-50 to-white\">\n                        <CardContent className=\"p-6\">\n                          <div className=\"flex items-center justify-between space-y-0 pb-2\">\n                            <p className=\"text-sm font-medium text-purple-700\">Total Revenue</p>\n                            <DollarSign className=\"h-4 w-4 text-purple-400\" />\n                          </div>\n                          <div className=\"flex items-baseline gap-2 mt-2\">\n                            <div className=\"text-2xl font-bold text-purple-900\">KES {analytics.totalRevenue.toLocaleString()}</div>\n                          </div>\n                        </CardContent>\n                      </Card>\n\n                      <Card className=\"border-none shadow-sm bg-white hover:shadow-md transition-all\">\n                        <CardContent className=\"p-6\">\n                          <div className=\"flex items-center justify-between space-y-0 pb-2\">\n                            <p className=\"text-sm font-medium text-slate-500\">Active Listings</p>\n                            <Home className=\"h-4 w-4 text-slate-400\" />\n                          </div>\n                          <div className=\"flex items-baseline gap-2 mt-2\">\n                            <div className=\"text-2xl font-bold text-slate-900\">{properties.length}</div>\n                            <span className=\"text-xs text-slate-500\">properties</span>\n                          </div>\n                        </CardContent>\n                      </Card>\n                    </>\n                  )}\n                </div>\n              </div>\n\n              {/* Charts Section - Two Column */}\n              {properties.length > 0 && (\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n                  <Card className=\"border-none shadow-sm bg-white p-6\">\n                    <div className=\"mb-6\">\n                      <h4 className=\"font-bold text-lg text-slate-900\">Revenue Trends</h4>\n                      <p className=\"text-sm text-slate-500\">Monthly earnings overview</p>\n                    </div>\n                    <div className=\"h-[250px] w-full\">\n                      <ResponsiveContainer width=\"100%\" height=\"100%\">\n                        <BarChart data={analytics.monthlyStats}>\n                          <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#f1f5f9\" />\n                          <XAxis dataKey=\"name\" axisLine={false} tickLine={false} tick={{ fontSize: 12, fill: '#94a3b8' }} dy={10} />\n                          <YAxis axisLine={false} tickLine={false} tick={{ fontSize: 12, fill: '#94a3b8' }} tickFormatter={(value) => `K${value / 1000}k`} />\n                          <Tooltip cursor={{ fill: '#f8fafc' }} contentStyle={{ borderRadius: '8px', border: 'none', boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)' }} />\n                          <Bar dataKey=\"revenue\" fill=\"#3b82f6\" radius={[4, 4, 0, 0]} barSize={32} />\n                        </BarChart>\n                      </ResponsiveContainer>\n                    </div>\n                  </Card>\n\n                  <Card className=\"border-none shadow-sm bg-white p-6\">\n                    <div className=\"mb-6\">\n                      <h4 className=\"font-bold text-lg text-slate-900\">Occupancy Rate</h4>\n                      <p className=\"text-sm text-slate-500\">Booking consistency</p>\n                    </div>\n                    <div className=\"h-[250px] w-full\">\n                      <ResponsiveContainer width=\"100%\" height=\"100%\">\n                        <AreaChart data={analytics.monthlyStats}>\n                          <defs>\n                            <linearGradient id=\"colorBookings\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                              <stop offset=\"5%\" stopColor=\"#8b5cf6\" stopOpacity={0.2} />\n                              <stop offset=\"95%\" stopColor=\"#8b5cf6\" stopOpacity={0} />\n                            </linearGradient>\n                          </defs>\n                          <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#f1f5f9\" />\n                          <XAxis dataKey=\"name\" axisLine={false} tickLine={false} tick={{ fontSize: 12, fill: '#94a3b8' }} dy={10} />\n                          <YAxis axisLine={false} tickLine={false} tick={{ fontSize: 12, fill: '#94a3b8' }} />\n                          <Tooltip contentStyle={{ borderRadius: '8px', border: 'none', boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)' }} />\n                          <Area type=\"monotone\" dataKey=\"bookings\" stroke=\"#8b5cf6\" strokeWidth={3} fill=\"url(#colorBookings)\" />\n                        </AreaChart>\n                      </ResponsiveContainer>\n                    </div>\n                  </Card>\n                </div>\n              )}\n\n              {/* Recent Activity Section */}\n              <div className=\"border-none shadow-sm bg-white rounded-xl overflow-hidden p-6\">\n                <div className=\"flex items-center justify-between mb-6\">\n                  <h3 className=\"text-lg font-bold text-slate-900\">Recent Activity</h3>\n                  <Button variant=\"ghost\" size=\"sm\" className=\"text-primary hover:bg-primary/5\" onClick={() => setActiveTab('bookings')}>View All</Button>\n                </div>\n\n                <div className=\"space-y-1\">\n                  {bookings.slice(0, 5).map((booking, i) => (\n                    <div key={booking.id} className=\"flex items-center justify-between p-4 hover:bg-slate-50 rounded-lg transition-colors group cursor-pointer\" onClick={() => navigate('/properties')}>\n                      <div className=\"flex items-center gap-4\">\n                        <div className=\"h-10 w-10 rounded-full bg-blue-50 flex items-center justify-center text-blue-600 font-bold text-sm\">\n                          {booking.properties?.title.charAt(0)}\n                        </div>\n                        <div>\n                          <h4 className=\"font-semibold text-slate-900 group-hover:text-primary transition-colors\">{booking.properties?.title}</h4>\n                          <p className=\"text-xs text-slate-500 mt-0.5\">\n                            {new Date(booking.check_in).toLocaleDateString()} â€” {new Date(booking.check_out).toLocaleDateString()}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${booking.status === 'confirmed' ? 'bg-green-100 text-green-700' :\n                          booking.status === 'pending' ? 'bg-yellow-100 text-yellow-700' :\n                            'bg-red-100 text-red-700'\n                          }`}>\n                          {booking.status.charAt(0).toUpperCase() + booking.status.slice(1)}\n                        </span>\n                        <p className=\"text-sm font-semibold text-slate-900 mt-1\">KES {booking.total_price.toLocaleString()}</p>\n                      </div>\n                    </div>\n                  ))}\n                  {bookings.length === 0 && (\n                    <div className=\"py-12 text-center\">\n                      <div className=\"h-12 w-12 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-3\">\n                        <Calendar className=\"h-6 w-6 text-slate-300\" />\n                      </div>\n                      <p className=\"text-slate-500 font-medium\">No recent activity</p>\n                      <p className=\"text-sm text-slate-400 mt-1\">Your recent bookings will appear here</p>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </TabsContent>\n\n            {/* Bookings Tab */}\n            <TabsContent value=\"bookings\" className=\"animate-fade-in space-y-6\">\n              {isLoading ? (\n                <div className=\"flex justify-center py-20\">\n                  <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n                </div>\n              ) : bookings.length === 0 ? (\n                <div className=\"flex flex-col items-center justify-center py-24 text-center border-none bg-white shadow-sm rounded-3xl\">\n                  <div className=\"h-20 w-20 bg-blue-50 rounded-full flex items-center justify-center mb-6\">\n                    <Calendar className=\"h-10 w-10 text-blue-500\" />\n                  </div>\n                  <h3 className=\"text-2xl font-serif font-bold mb-3 text-slate-800\">No bookings yet</h3>\n                  <p className=\"text-slate-500 max-w-sm mx-auto mb-8\">\n                    You haven't made any reservations. Your next adventure is just a click away!\n                  </p>\n                  <Button onClick={() => navigate('/properties')} size=\"lg\" className=\"bg-slate-900 text-white hover:bg-slate-800 rounded-full px-8\">\n                    Explore Properties\n                  </Button>\n                </div>\n              ) : (\n                <div className=\"grid gap-6\">\n                  {bookings.map((booking) => (\n                    <Card key={booking.id} className=\"border-none shadow-sm bg-white hover:shadow-md transition-all overflow-hidden group\">\n                      <CardContent className=\"p-0\">\n                        <div className=\"flex flex-col md:flex-row\">\n                          {/* Image or Placeholder on Left (Could be added if property has images) */}\n                          <div className=\"md:w-2 bg-slate-100 group-hover:bg-primary/20 transition-colors\" />\n\n                          <div className=\"flex-grow p-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-6\">\n                            <div className=\"flex items-start gap-4\">\n                              <div className=\"h-12 w-12 rounded-xl bg-slate-100 flex items-center justify-center flex-shrink-0\">\n                                <Calendar className=\"h-6 w-6 text-slate-500\" />\n                              </div>\n                              <div>\n                                <h3 className=\"font-bold text-lg text-slate-800\">{booking.properties?.title}</h3>\n                                <p className=\"text-xs text-slate-400 font-mono mt-1\">ID: {booking.id.split('-')[0]}...</p>\n                                <div className=\"flex items-center gap-4 mt-3 text-sm text-slate-600\">\n                                  <div className=\"flex items-center gap-1.5 bg-slate-50 px-2 py-1 rounded-md\">\n                                    <Calendar className=\"h-3.5 w-3.5\" />\n                                    <span>{new Date(booking.check_in).toLocaleDateString()} - {new Date(booking.check_out).toLocaleDateString()}</span>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n\n                            <div className=\"flex flex-wrap gap-6 items-center w-full md:w-auto justify-between md:justify-end border-t md:border-t-0 border-slate-100 pt-4 md:pt-0 mt-2 md:mt-0\">\n                              <div className=\"text-right mr-4\">\n                                <p className=\"text-sm text-slate-500 mb-0.5\">Total</p>\n                                <p className=\"font-bold text-xl text-slate-900\">KES {booking.total_price.toLocaleString()}</p>\n                              </div>\n\n                              <div className=\"flex items-center gap-3\">\n                                <span className={`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${booking.status === 'confirmed' ? 'bg-green-100 text-green-700' :\n                                  booking.status === 'pending' ? 'bg-yellow-100 text-yellow-700' :\n                                    'bg-red-100 text-red-700'\n                                  }`}>\n                                  {booking.status.charAt(0).toUpperCase() + booking.status.slice(1)}\n                                </span>\n\n                                {booking.status !== 'cancelled' && (\n                                  <Button\n                                    variant=\"ghost\"\n                                    size=\"sm\"\n                                    className=\"text-red-600 hover:text-red-700 hover:bg-red-50\"\n                                    onClick={() => handleCancelClick(booking.id)}\n                                  >\n                                    Cancel\n                                  </Button>\n                                )}\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              )}\n            </TabsContent>\n\n            {/* Properties Tab */}\n            <TabsContent value=\"properties\" className=\"animate-fade-in\">\n              {(showAddProperty || editingId) && (\n                <Card className=\"mb-8 border-primary/20 bg-primary/5\">\n                  <CardHeader>\n                    <CardTitle>{editingId ? 'Edit Property' : 'Add New Property'}</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <form onSubmit={handleSaveProperty} className=\"space-y-6\">\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                        <div className=\"space-y-2\">\n                          <label className=\"text-sm font-medium\">Property Name</label>\n                          <input\n                            type=\"text\"\n                            value={newProperty.name}\n                            onChange={(e) => setNewProperty({ ...newProperty, name: e.target.value })}\n                            className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\"\n                            required\n                          />\n                        </div>\n                        <div className=\"space-y-2\">\n                          <label className=\"text-sm font-medium\">Location</label>\n                          <input\n                            type=\"text\"\n                            value={newProperty.location}\n                            onChange={(e) => setNewProperty({ ...newProperty, location: e.target.value })}\n                            className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\"\n                            required\n                          />\n                        </div>\n                      </div>\n\n                      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                        <div className=\"space-y-2\">\n                          <label className=\"text-sm font-medium\">Price (KES)</label>\n                          <input\n                            type=\"number\"\n                            value={newProperty.price}\n                            onChange={(e) => setNewProperty({ ...newProperty, price: e.target.value })}\n                            className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\"\n                            required\n                          />\n                        </div>\n                        <div className=\"space-y-2\">\n                          <label className=\"text-sm font-medium\">Max Guests</label>\n                          <input\n                            type=\"number\"\n                            value={newProperty.max_guests}\n                            onChange={(e) => setNewProperty({ ...newProperty, max_guests: e.target.value })}\n                            className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\"\n                            min=\"1\"\n                            required\n                          />\n                        </div>\n                        <div className=\"space-y-2\">\n                          <label className=\"text-sm font-medium\">Bedrooms</label>\n                          <input\n                            type=\"number\"\n                            value={newProperty.bedrooms}\n                            onChange={(e) => setNewProperty({ ...newProperty, bedrooms: e.target.value })}\n                            className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\"\n                            min=\"0\"\n                            required\n                          />\n                        </div>\n                        <div className=\"space-y-2\">\n                          <label className=\"text-sm font-medium\">Beds</label>\n                          <input\n                            type=\"number\"\n                            value={newProperty.beds}\n                            onChange={(e) => setNewProperty({ ...newProperty, beds: e.target.value })}\n                            className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\"\n                            min=\"1\"\n                            required\n                          />\n                        </div>\n                        <div className=\"space-y-2\">\n                          <label className=\"text-sm font-medium\">Baths</label>\n                          <input\n                            type=\"number\"\n                            value={newProperty.baths}\n                            onChange={(e) => setNewProperty({ ...newProperty, baths: e.target.value })}\n                            className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\"\n                            min=\"1\"\n                            required\n                          />\n                        </div>\n                      </div>\n\n                      <div className=\"space-y-2\">\n                        <label className=\"text-sm font-medium\">Amenities</label>\n                        <div className=\"flex flex-wrap gap-3 p-3 border rounded-md bg-neutral/5\">\n                          {['Wifi', 'Parking', 'Pool', 'Gym', 'Air Conditioning', 'Kitchen', 'TV', 'Washer', 'Garden', 'Security'].map(amenity => (\n                            <label key={amenity} className=\"flex items-center gap-2 text-sm cursor-pointer\">\n                              <input\n                                type=\"checkbox\"\n                                checked={newProperty.amenities.includes(amenity)}\n                                onChange={(e) => {\n                                  if (e.target.checked) {\n                                    setNewProperty({ ...newProperty, amenities: [...newProperty.amenities, amenity] });\n                                  } else {\n                                    setNewProperty({ ...newProperty, amenities: newProperty.amenities.filter(a => a !== amenity) });\n                                  }\n                                }}\n                                className=\"rounded border-gray-300 text-primary focus:ring-primary\"\n                              />\n                              {amenity}\n                            </label>\n                          ))}\n                        </div>\n                      </div>\n\n                      <div className=\"space-y-4\">\n                        <label className=\"text-sm font-medium\">Property Images</label>\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4\">\n                          {newProperty.images.map((img, index) => (\n                            <div key={index} className=\"relative aspect-square rounded-lg overflow-hidden border border-border group\">\n                              <img src={img} alt={`Property ${index + 1}`} className=\"w-full h-full object-cover\" />\n                              <button\n                                type=\"button\"\n                                onClick={() => setNewProperty({ ...newProperty, images: newProperty.images.filter((_, i) => i !== index) })}\n                                className=\"absolute top-2 right-2 p-1 bg-destructive/90 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity\"\n                              >\n                                <Trash className=\"h-4 w-4\" />\n                              </button>\n                            </div>\n                          ))}\n                          <label className=\"flex flex-col items-center justify-center border-2 border-dashed border-border rounded-lg aspect-square cursor-pointer hover:bg-neutral/5 transition-colors\">\n                            <Plus className=\"h-8 w-8 text-muted-foreground mb-2\" />\n                            <span className=\"text-xs text-muted-foreground\">Add Image</span>\n                            <input\n                              type=\"file\"\n                              accept=\"image/*\"\n                              multiple\n                              className=\"hidden\"\n                              onChange={async (e) => {\n                                const files = e.target.files;\n                                if (!files || files.length === 0) return;\n\n                                try {\n                                  toast.info('Uploading images...');\n                                  const uploadPromises = Array.from(files).map(file => api.uploadImage(file));\n                                  const uploadedUrls = await Promise.all(uploadPromises);\n\n                                  setNewProperty({\n                                    ...newProperty,\n                                    images: [...newProperty.images, ...uploadedUrls]\n                                  });\n                                  toast.success('Images uploaded successfully');\n                                } catch (error) {\n                                  console.error('Error uploading images:', error);\n                                  toast.error('Failed to upload some images');\n                                }\n                              }}\n                            />\n                          </label>\n                        </div>\n                      </div>\n\n                      <div className=\"space-y-2\">\n                        <label className=\"text-sm font-medium\">Description</label>\n                        <textarea\n                          value={newProperty.description}\n                          onChange={(e) => setNewProperty({ ...newProperty, description: e.target.value })}\n                          className=\"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\"\n                          rows={3}\n                        />\n                      </div>\n                      <div className=\"flex justify-end space-x-2\">\n                        <Button type=\"button\" variant=\"outline\" onClick={closePropertyForm}>\n                          Cancel\n                        </Button>\n                        <Button type=\"submit\">\n                          {editingId ? 'Update Listing' : 'Save Listing'}\n                        </Button>\n                      </div>\n                    </form>\n                  </CardContent>\n                </Card>\n              )}\n\n              {isLoading ? (\n                <div className=\"flex justify-center py-12\">\n                  <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n                </div>\n              ) : (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n                  {properties.map((property) => (\n                    <Card key={property.id} className=\"group border-none shadow-sm hover:shadow-xl transition-all duration-300 bg-white overflow-hidden rounded-2xl\">\n                      <div className=\"relative h-56 overflow-hidden\">\n                        <img\n                          src={property.images?.[0] || 'https://via.placeholder.com/300x200'}\n                          alt={property.title}\n                          className=\"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105\"\n                        />\n                        <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity\" />\n                        <div className=\"absolute top-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\n                          <Button size=\"icon\" variant=\"secondary\" className=\"h-8 w-8 bg-white/90 hover:bg-white text-slate-900 shadow-sm\" onClick={() => startEditing(property)}>\n                            <Edit className=\"h-4 w-4\" />\n                          </Button>\n                          <Button size=\"icon\" variant=\"secondary\" className=\"h-8 w-8 bg-white/90 hover:bg-white text-slate-900 shadow-sm\" onClick={() => setCalendarProperty({ id: property.id, title: property.title })} title=\"Manage Calendar\">\n                            <Calendar className=\"h-4 w-4\" />\n                          </Button>\n                          <Button size=\"icon\" variant=\"destructive\" className=\"h-8 w-8 shadow-sm\" onClick={async () => {\n                            if (confirm('Are you sure you want to delete this property?')) {\n                              try {\n                                await api.deleteProperty(property.id);\n                                setProperties(properties.filter(p => p.id !== property.id));\n                                toast.success('Property deleted successfully');\n                              } catch (error) {\n                                console.error('Error deleting property:', error);\n                                toast.error('Failed to delete property');\n                              }\n                            }\n                          }}>\n                            <Trash className=\"h-4 w-4\" />\n                          </Button>\n                        </div>\n                      </div>\n                      <CardContent className=\"p-5\">\n                        <div className=\"flex justify-between items-start mb-2\">\n                          <h3 className=\"font-bold text-lg text-slate-900 line-clamp-1\">{property.title}</h3>\n                        </div>\n                        <p className=\"text-sm text-slate-500 mb-4 flex items-center\">\n                          <MapPin className=\"h-3.5 w-3.5 mr-1\" /> {property.location}\n                        </p>\n\n                        <div className=\"flex items-center justify-between pt-4 border-t border-slate-100\">\n                          <div>\n                            <span className=\"text-lg font-bold text-primary\">KES {property.price_per_night}</span>\n                            <span className=\"text-xs text-slate-400\">/night</span>\n                          </div>\n                          <div className=\"flex items-center text-xs text-slate-500 gap-3\">\n                            <span className=\"flex items-center gap-1\"><User className=\"h-3 w-3\" /> {property.max_guests}</span>\n                            <span className=\"flex items-center gap-1\">â˜… 4.9</span>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n\n                  <div\n                    onClick={() => setShowAddProperty(true)}\n                    className=\"border-2 border-dashed border-slate-200 rounded-2xl flex flex-col items-center justify-center h-full min-h-[350px] cursor-pointer hover:border-primary/50 hover:bg-primary/5 transition-all group bg-slate-50/50\"\n                  >\n                    <div className=\"h-16 w-16 rounded-full bg-white shadow-sm flex items-center justify-center group-hover:scale-110 transition-transform mb-4 text-primary\">\n                      <Plus className=\"h-8 w-8\" />\n                    </div>\n                    <h3 className=\"font-semibold text-lg text-slate-600 group-hover:text-primary transition-colors\">Add New Property</h3>\n                    <p className=\"text-sm text-slate-400 mt-2 text-center px-8\">Create a new listing to start hosting guests</p>\n                  </div>\n                </div>\n              )}\n            </TabsContent>\n\n            {/* Favorites Tab */}\n            <TabsContent value=\"favorites\" className=\"animate-fade-in\">\n              {isLoading ? (\n                <div className=\"flex justify-center py-20\">\n                  <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n                </div>\n              ) : favorites.length === 0 ? (\n                <div className=\"flex flex-col items-center justify-center py-24 text-center border-none bg-white shadow-sm rounded-3xl\">\n                  <div className=\"h-20 w-20 bg-rose-50 rounded-full flex items-center justify-center mb-6\">\n                    <Heart className=\"h-10 w-10 text-rose-500\" />\n                  </div>\n                  <h3 className=\"text-2xl font-serif font-bold mb-3 text-slate-800\">No favorites yet</h3>\n                  <p className=\"text-slate-500 max-w-sm mx-auto mb-8\">\n                    Start exploring and save your dream stays here for quick access.\n                  </p>\n                  <Button onClick={() => navigate('/properties')} size=\"lg\" className=\"bg-slate-900 text-white hover:bg-slate-800 rounded-full px-8\">\n                    Explore Properties\n                  </Button>\n                </div>\n              ) : (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n                  {favorites.map((property) => (\n                    <Card key={property.id} className=\"group border-none shadow-sm hover:shadow-xl transition-all duration-300 bg-white overflow-hidden rounded-2xl cursor-pointer\" onClick={() => navigate(`/property/${property.id}`)}>\n                      <div className=\"relative h-56 overflow-hidden\">\n                        <img\n                          src={property.images?.[0] || 'https://via.placeholder.com/300x200'}\n                          alt={property.title}\n                          className=\"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105\"\n                        />\n                        <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-60\" />\n\n                        <div className=\"absolute top-3 right-3 z-10\">\n                          <button\n                            className=\"p-2.5 bg-white/90 backdrop-blur-sm rounded-full shadow-sm hover:scale-110 active:scale-95 transition-all group/btn\"\n                            onClick={async (e) => {\n                              e.stopPropagation();\n                              try {\n                                await api.removeFavorite(property.id, user.id);\n                                setFavorites(favorites.filter(f => f.id !== property.id));\n                                toast.success('Removed from favorites');\n                              } catch (error) {\n                                toast.error('Failed to remove');\n                              }\n                            }}\n                          >\n                            <Heart className=\"h-5 w-5 fill-rose-500 text-rose-500\" />\n                          </button>\n                        </div>\n\n                        <div className=\"absolute bottom-4 left-4 right-4 text-white\">\n                          <div className=\"flex justify-between items-end\">\n                            <div>\n                              <h3 className=\"font-bold text-lg leading-tight line-clamp-1 text-white text-shadow-sm\">{property.title}</h3>\n                              <p className=\"text-sm text-slate-200 flex items-center mt-1\">\n                                <MapPin className=\"h-3.5 w-3.5 mr-1\" /> {property.location}\n                              </p>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      <CardContent className=\"p-5\">\n                        <div className=\"flex justify-between items-center\">\n                          <div>\n                            <span className=\"text-xl font-bold text-slate-900\">KES {property.price_per_night}</span>\n                            <span className=\"text-sm text-slate-500\">/night</span>\n                          </div>\n                          <Button variant=\"ghost\" size=\"sm\" className=\"text-primary hover:text-primary hover:bg-primary/5 font-medium px-0\">\n                            View Details\n                          </Button>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              )}\n            </TabsContent>\n\n            {/* Profile Tab */}\n            <TabsContent value=\"profile\" className=\"animate-fade-in\">\n              <div className=\"max-w-4xl mx-auto\">\n                <Card className=\"border-none shadow-sm bg-white overflow-hidden rounded-3xl\">\n                  <div className=\"h-32 bg-slate-900 relative\">\n                    <div className=\"absolute inset-0 bg-gradient-to-r from-primary/20 to-transparent\" />\n                  </div>\n                  <CardContent className=\"space-y-8 px-8 pb-12\">\n                    <div className=\"flex flex-col md:flex-row items-end md:items-end gap-8 -mt-16 px-4\">\n                      <div className=\"relative group cursor-pointer\">\n                        <Avatar className=\"h-32 w-32 border-4 border-white shadow-xl bg-white\">\n                          <AvatarImage src={user.avatar_url} className=\"object-cover\" />\n                          <AvatarFallback className=\"text-4xl bg-slate-100 text-slate-500\">{user.name?.charAt(0)}</AvatarFallback>\n                        </Avatar>\n                        <div className=\"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity backdrop-blur-[2px]\">\n                          <label htmlFor=\"avatar-upload\" className=\"cursor-pointer text-white flex flex-col items-center\">\n                            <Edit className=\"h-6 w-6 mb-1\" />\n                            <span className=\"text-xs font-medium\">Change</span>\n                          </label>\n                          <input\n                            id=\"avatar-upload\"\n                            type=\"file\"\n                            accept=\"image/*\"\n                            className=\"hidden\"\n                            onChange={handleAvatarUpload}\n                          />\n                        </div>\n                      </div>\n                      <div className=\"mb-2 text-center md:text-left\">\n                        <h2 className=\"text-3xl font-serif font-bold text-slate-900\">{user.name}</h2>\n                        <p className=\"text-slate-500\">{user.email}</p>\n                        <Badge variant=\"outline\" className=\"mt-2 capitalize bg-slate-50 text-slate-600 border-slate-200\">{user.user_type}</Badge>\n                      </div>\n                    </div>\n\n                    <div className=\"h-px bg-slate-100 my-8\" />\n\n                    {!isEditingProfile ? (\n                      <div className=\"space-y-8 px-4\">\n                        <h3 className=\"text-xl font-bold text-slate-900\">Personal Information</h3>\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-8\">\n                          <div>\n                            <Label className=\"text-slate-500 text-xs uppercase tracking-wider font-semibold mb-2 block\">Full Name</Label>\n                            <p className=\"text-lg font-medium text-slate-900 border-b border-slate-100 pb-2\">{user.name || 'Not set'}</p>\n                          </div>\n                          <div>\n                            <Label className=\"text-slate-500 text-xs uppercase tracking-wider font-semibold mb-2 block\">Email Address</Label>\n                            <p className=\"text-lg font-medium text-slate-900 border-b border-slate-100 pb-2\">{user.email}</p>\n                          </div>\n                          <div>\n                            <Label className=\"text-slate-500 text-xs uppercase tracking-wider font-semibold mb-2 block\">Phone Number</Label>\n                            <p className=\"text-lg font-medium text-slate-900 border-b border-slate-100 pb-2\">{user.phone || 'Not set'}</p>\n                          </div>\n                          <div>\n                            <Label className=\"text-slate-500 text-xs uppercase tracking-wider font-semibold mb-2 block\">Account ID</Label>\n                            <p className=\"font-mono text-sm text-slate-400 bg-slate-50 p-2 rounded w-fit\">{user.id}</p>\n                          </div>\n                        </div>\n                        <div className=\"flex justify-end pt-4\">\n                          <Button onClick={() => {\n                            setProfileForm({\n                              full_name: user.name || '',\n                              phone: user.phone || ''\n                            });\n                            setIsEditingProfile(true);\n                          }} size=\"lg\" className=\"bg-slate-900 hover:bg-slate-800 text-white px-8 rounded-full\">\n                            Edit Profile\n                          </Button>\n                        </div>\n                      </div>\n                    ) : (\n                      <form onSubmit={handleUpdateProfile} className=\"space-y-8 px-4 animate-in slide-in-from-bottom-2 fade-in duration-300\">\n                        <h3 className=\"text-xl font-bold text-slate-900\">Edit Profile</h3>\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n                          <div className=\"space-y-3\">\n                            <Label htmlFor=\"full_name\" className=\"text-slate-700\">Full Name</Label>\n                            <Input\n                              id=\"full_name\"\n                              value={profileForm.full_name}\n                              onChange={(e) => setProfileForm({ ...profileForm, full_name: e.target.value })}\n                              className=\"h-12 border-slate-200 focus-visible:ring-primary\"\n                            />\n                          </div>\n                          <div className=\"space-y-3\">\n                            <Label htmlFor=\"phone\" className=\"text-slate-700\">Phone Number</Label>\n                            <Input\n                              id=\"phone\"\n                              value={profileForm.phone}\n                              onChange={(e) => setProfileForm({ ...profileForm, phone: e.target.value })}\n                              className=\"h-12 border-slate-200 focus-visible:ring-primary\"\n                            />\n                          </div>\n                        </div>\n                        <div className=\"flex justify-end space-x-3 pt-4 border-t border-slate-100\">\n                          <Button type=\"button\" variant=\"ghost\" size=\"lg\" onClick={() => setIsEditingProfile(false)} className=\"rounded-full\">\n                            Cancel\n                          </Button>\n                          <Button type=\"submit\" size=\"lg\" className=\"bg-primary hover:bg-primary/90 rounded-full px-8\">Save Changes</Button>\n                        </div>\n                      </form>\n                    )}\n                  </CardContent>\n                </Card>\n              </div>\n            </TabsContent>\n          </Tabs>\n        </div>\n      </main>\n      <Footer />\n      <AlertDialog open={isCancelDialogOpen} onOpenChange={setIsCancelDialogOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Cancel Booking?</AlertDialogTitle>\n            <AlertDialogDescription>\n              Are you sure you want to cancel this booking? This action cannot be undone.\n              Refunds are processed according to the cancellation policy.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Keep Booking</AlertDialogCancel>\n            <AlertDialogAction onClick={handleConfirmCancel} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\n              Yes, Cancel Booking\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      <ManageCalendarDialog\n        propertyId={calendarProperty?.id || null}\n        propertyTitle={calendarProperty?.title || ''}\n        isOpen={!!calendarProperty}\n        onClose={() => setCalendarProperty(null)}\n      />\n    </div>\n  );\n};\n\nexport default Dashboard;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\pages\\Index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\pages\\NotFound.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\pages\\Properties.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'maxPriceInData'. Either include it or remove the dependency array.","line":81,"column":6,"nodeType":"ArrayExpression","endLine":81,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [maxPrice, maxPriceInData]","fix":{"range":[2784,2794],"text":"[maxPrice, maxPriceInData]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useMemo } from 'react';\r\nimport { useSearchParams } from 'react-router-dom';\r\nimport Navbar from '@/components/Navbar';\r\nimport Footer from '@/components/Footer';\r\nimport PropertyCard from '@/components/PropertyCard';\r\nimport { PropertyCardSkeleton } from '@/components/PropertyCardSkeleton';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Slider } from '@/components/ui/slider';\r\nimport {\r\n  Sheet,\r\n  SheetContent,\r\n  SheetDescription,\r\n  SheetHeader,\r\n  SheetTitle,\r\n  SheetTrigger,\r\n  SheetFooter,\r\n  SheetClose,\r\n} from \"@/components/ui/sheet\";\r\nimport {\r\n  Accordion,\r\n  AccordionContent,\r\n  AccordionItem,\r\n  AccordionTrigger,\r\n} from \"@/components/ui/accordion\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { api, Property } from '@/services/api';\r\nimport { Loader2, Filter, SlidersHorizontal, MapPin, X, ChevronDown } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\n\r\nconst Properties = () => {\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [properties, setProperties] = useState<Property[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // --- Filter State ---\r\n  const [priceRange, setPriceRange] = useState([0, 50000]);\r\n  const [selectedLocations, setSelectedLocations] = useState<string[]>([]);\r\n  const [selectedTypes, setSelectedTypes] = useState<string[]>([]);\r\n  const [selectedAmenities, setSelectedAmenities] = useState<string[]>([]);\r\n  const [minGuests, setMinGuests] = useState<number>(0);\r\n  const [sortOption, setSortOption] = useState('recommended');\r\n\r\n  const [maxPriceInData, setMaxPriceInData] = useState(20000);\r\n\r\n  // --- Derived Data for Filter Options ---\r\n  const { locations, types, amenities, maxPrice } = useMemo(() => {\r\n    const locs = new Set<string>();\r\n    const typs = new Set<string>();\r\n    const amens = new Set<string>();\r\n    let maxP = 0;\r\n\r\n    properties.forEach(p => {\r\n      if (p.location) locs.add(p.location);\r\n      if (p.property_type) typs.add(p.property_type);\r\n      if (p.price_per_night > maxP) maxP = p.price_per_night;\r\n      p.amenities?.forEach(a => amens.add(a));\r\n    });\r\n\r\n    return {\r\n      locations: Array.from(locs).sort(),\r\n      types: Array.from(typs).sort(),\r\n      amenities: Array.from(amens).sort().slice(0, 10),\r\n      maxPrice: Math.ceil(maxP / 1000) * 1000 || 20000\r\n    };\r\n  }, [properties]);\r\n\r\n  useEffect(() => {\r\n    if (maxPrice > 0 && maxPriceInData !== maxPrice) {\r\n      setMaxPriceInData(maxPrice);\r\n      setPriceRange([0, maxPrice]);\r\n    }\r\n  }, [maxPrice]);\r\n\r\n\r\n  useEffect(() => {\r\n    fetchProperties();\r\n  }, []);\r\n\r\n  // Initialize filters from URL\r\n  useEffect(() => {\r\n    const locParam = searchParams.get('location');\r\n    const guestsParam = searchParams.get('guests');\r\n\r\n    if (locParam && locParam !== 'all') {\r\n      setSelectedLocations([locParam]);\r\n    }\r\n    if (guestsParam) {\r\n      setMinGuests(parseInt(guestsParam) || 0);\r\n    }\r\n  }, [searchParams]);\r\n\r\n  const fetchProperties = async () => {\r\n    try {\r\n      const data = await api.getProperties();\r\n      setProperties(data);\r\n    } catch (error) {\r\n      console.error('Error fetching properties:', error);\r\n      toast.error('Failed to load properties');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- Filtering Logic (Realtime) ---\r\n  const filteredProperties = useMemo(() => {\r\n    return properties.filter(p => {\r\n      const price = Number(p.price_per_night) || 0;\r\n      const guests = Number(p.max_guests) || 0;\r\n\r\n      if (price < priceRange[0] || price > priceRange[1]) return false;\r\n\r\n      if (selectedLocations.length > 0) {\r\n        const matchesLocation = selectedLocations.some(loc =>\r\n          p.location && p.location.toLowerCase().includes(loc.toLowerCase())\r\n        );\r\n        if (!matchesLocation) return false;\r\n      }\r\n\r\n      if (selectedTypes.length > 0) {\r\n        if (!p.property_type || !selectedTypes.includes(p.property_type)) return false;\r\n      }\r\n\r\n      if (selectedAmenities.length > 0) {\r\n        const hasAllAmenities = selectedAmenities.every(amenity =>\r\n          p.amenities?.includes(amenity)\r\n        );\r\n        if (!hasAllAmenities) return false;\r\n      }\r\n\r\n      if (guests < minGuests) return false;\r\n\r\n      return true;\r\n    }).sort((a, b) => {\r\n      const priceA = Number(a.price_per_night) || 0;\r\n      const priceB = Number(b.price_per_night) || 0;\r\n      switch (sortOption) {\r\n        case 'price-low': return priceA - priceB;\r\n        case 'price-high': return priceB - priceA;\r\n        case 'rating': return b.rating - a.rating;\r\n        default: return 0;\r\n      }\r\n    });\r\n  }, [properties, priceRange, selectedLocations, selectedTypes, selectedAmenities, minGuests, sortOption]);\r\n\r\n  // --- Handlers ---\r\n  const toggleFilter = (\r\n    currentList: string[],\r\n    setList: React.Dispatch<React.SetStateAction<string[]>>,\r\n    item: string\r\n  ) => {\r\n    if (currentList.includes(item)) {\r\n      setList(currentList.filter(i => i !== item));\r\n    } else {\r\n      setList([...currentList, item]);\r\n    }\r\n  };\r\n\r\n  const clearAllFilters = () => {\r\n    setPriceRange([0, maxPriceInData]);\r\n    setSelectedLocations([]);\r\n    setSelectedTypes([]);\r\n    setSelectedAmenities([]);\r\n    setMinGuests(0);\r\n    setSortOption('recommended');\r\n    toast.info(\"Filters cleared\");\r\n  };\r\n\r\n  const getCount = (key: string, value: string) => {\r\n    if (key === 'type') return properties.filter(p => p.property_type === value).length;\r\n    if (key === 'location') return properties.filter(p => p.location === value).length;\r\n    if (key === 'amenity') return properties.filter(p => p.amenities?.includes(value)).length;\r\n    return 0;\r\n  };\r\n\r\n  // Filter Content for Sheet/Drawer\r\n  const FilterContent = () => (\r\n    <div className=\"space-y-6 pb-20\">\r\n      <div>\r\n        <h3 className=\"text-sm font-semibold mb-4\">Price Range</h3>\r\n        <Slider\r\n          defaultValue={[0, maxPriceInData]}\r\n          max={maxPriceInData}\r\n          step={500}\r\n          value={priceRange}\r\n          onValueChange={setPriceRange}\r\n          className=\"my-6\"\r\n        />\r\n        <div className=\"flex items-center justify-between text-sm\">\r\n          <div className=\"border px-2 py-1 rounded bg-background\">KES {priceRange[0]}</div>\r\n          <div className=\"text-muted-foreground\">-</div>\r\n          <div className=\"border px-2 py-1 rounded bg-background\">KES {priceRange[1]}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"h-px bg-border\" />\r\n\r\n      <Accordion type=\"single\" collapsible defaultValue=\"types\">\r\n        <AccordionItem value=\"types\" className=\"border-none\">\r\n          <AccordionTrigger className=\"py-2 hover:no-underline text-sm font-semibold\">Property Type</AccordionTrigger>\r\n          <AccordionContent>\r\n            <div className=\"space-y-3 pt-2\">\r\n              {types.map(type => (\r\n                <div key={type} className=\"flex items-center space-x-2\">\r\n                  <Checkbox\r\n                    id={`type-${type}`}\r\n                    checked={selectedTypes.includes(type)}\r\n                    onCheckedChange={() => toggleFilter(selectedTypes, setSelectedTypes, type)}\r\n                  />\r\n                  <Label htmlFor={`type-${type}`} className=\"text-sm font-normal flex-1 cursor-pointer flex justify-between\">\r\n                    <span>{type}</span>\r\n                    <span className=\"text-muted-foreground text-xs\">({getCount('type', type)})</span>\r\n                  </Label>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </AccordionContent>\r\n        </AccordionItem>\r\n      </Accordion>\r\n\r\n      <div className=\"h-px bg-border\" />\r\n\r\n      <Accordion type=\"single\" collapsible defaultValue=\"amenities\">\r\n        <AccordionItem value=\"amenities\" className=\"border-none\">\r\n          <AccordionTrigger className=\"py-2 hover:no-underline text-sm font-semibold\">Amenities</AccordionTrigger>\r\n          <AccordionContent>\r\n            <div className=\"space-y-3 pt-2\">\r\n              {amenities.map(amenity => (\r\n                <div key={amenity} className=\"flex items-center space-x-2\">\r\n                  <Checkbox\r\n                    id={`amenity-${amenity}`}\r\n                    checked={selectedAmenities.includes(amenity)}\r\n                    onCheckedChange={() => toggleFilter(selectedAmenities, setSelectedAmenities, amenity)}\r\n                  />\r\n                  <Label htmlFor={`amenity-${amenity}`} className=\"text-sm font-normal flex-1 cursor-pointer flex justify-between\">\r\n                    <span>{amenity}</span>\r\n                    <span className=\"text-muted-foreground text-xs\">({getCount('amenity', amenity)})</span>\r\n                  </Label>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </AccordionContent>\r\n        </AccordionItem>\r\n      </Accordion>\r\n\r\n      <div className=\"h-px bg-border\" />\r\n\r\n      <div>\r\n        <h3 className=\"text-sm font-semibold mb-3\">Guests</h3>\r\n        <div className=\"flex flex-wrap gap-2\">\r\n          {[1, 2, 3, 4, 5, 6].map(num => (\r\n            <Button\r\n              key={num}\r\n              variant={minGuests === num ? \"default\" : \"outline\"}\r\n              size=\"sm\"\r\n              className=\"h-8 w-8 p-0\"\r\n              onClick={() => setMinGuests(minGuests === num ? 0 : num)}\r\n            >\r\n              {num}+\r\n            </Button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background\">\r\n      <Navbar />\r\n\r\n      {/* Hero / Header */}\r\n      <div className=\"relative h-[30vh] min-h-[300px] flex items-center justify-center overflow-hidden\">\r\n        <div className=\"absolute inset-0 z-0\">\r\n          <img\r\n            src=\"https://images.unsplash.com/photo-1564013799919-ab600027ffc6?q=80&w=2070\"\r\n            className=\"w-full h-full object-cover\"\r\n            alt=\"Hero Background\"\r\n          />\r\n          <div className=\"absolute inset-0 bg-black/40\" />\r\n        </div>\r\n\r\n        <div className=\"chaka-container relative z-10 text-center px-4\">\r\n          <h1 className=\"text-4xl md:text-5xl font-serif font-bold mb-4 text-white tracking-tight drop-shadow-lg\">\r\n            Find Your Sanctuary\r\n          </h1>\r\n          <p className=\"text-lg text-white/90 max-w-xl mx-auto font-light\">\r\n            Discover handpicked homes and cabins for your next adventure.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"w-full max-w-[1540px] mx-auto px-4 sm:px-6 py-8 flex-grow\">\r\n\r\n        {/* Top Filter Bar - Replaces Sidebar */}\r\n        <div className=\"sticky top-[72px] z-30 bg-background/95 backdrop-blur-xl border-b border-border/40 -mx-6 px-6 py-4 mb-8 flex flex-col gap-4 md:flex-row md:items-center justify-between transition-all duration-300 shadow-sm\">\r\n\r\n          {/* Left: Filter Buttons */}\r\n          <div className=\"flex items-center gap-2 overflow-x-auto no-scrollbar pb-1 md:pb-0\">\r\n            {/* Main Filters Trigger */}\r\n            <Sheet>\r\n              <SheetTrigger asChild>\r\n                <Button variant=\"outline\" className=\"rounded-full border-primary/20 hover:border-primary hover:bg-primary/5 h-10 px-4\">\r\n                  <SlidersHorizontal className=\"w-4 h-4 mr-2\" />\r\n                  Filters\r\n                  {(selectedTypes.length > 0 || selectedAmenities.length > 0 || selectedLocations.length > 0 || minGuests > 0) && (\r\n                    <Badge variant=\"secondary\" className=\"ml-2 h-5 w-5 p-0 flex items-center justify-center rounded-full bg-primary text-white text-[10px] border-0\">\r\n                      {selectedTypes.length + selectedAmenities.length + selectedLocations.length + (minGuests > 0 ? 1 : 0)}\r\n                    </Badge>\r\n                  )}\r\n                </Button>\r\n              </SheetTrigger>\r\n              <SheetContent side=\"left\" className=\"w-full sm:w-[400px] overflow-y-auto\">\r\n                <SheetHeader>\r\n                  <SheetTitle className=\"font-serif text-2xl\">Filters</SheetTitle>\r\n                  <SheetDescription>Refine your search to find the perfect stay.</SheetDescription>\r\n                </SheetHeader>\r\n                <div className=\"mt-8\">\r\n                  <FilterContent />\r\n                </div>\r\n                <SheetFooter className=\"absolute bottom-0 left-0 right-0 p-4 border-t bg-background\">\r\n                  <div className=\"flex gap-2 w-full\">\r\n                    <Button variant=\"outline\" className=\"flex-1\" onClick={clearAllFilters}>Clear</Button>\r\n                    <SheetClose asChild>\r\n                      <Button className=\"flex-1\">Show Properties</Button>\r\n                    </SheetClose>\r\n                  </div>\r\n                </SheetFooter>\r\n              </SheetContent>\r\n            </Sheet>\r\n\r\n            <div className=\"h-6 w-px bg-border mx-2\" />\r\n\r\n            {/* Quick Type Filters (Optional/Extra) */}\r\n            {types.slice(0, 3).map(type => (\r\n              <Button\r\n                key={type}\r\n                variant={selectedTypes.includes(type) ? \"default\" : \"outline\"}\r\n                size=\"sm\"\r\n                className={`rounded-full h-9 px-4 text-xs ${selectedTypes.includes(type) ? '' : 'border-dashed'}`}\r\n                onClick={() => toggleFilter(selectedTypes, setSelectedTypes, type)}\r\n              >\r\n                {type}\r\n              </Button>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Right: Sort and Count */}\r\n          <div className=\"flex items-center justify-between md:justify-end gap-4 w-full md:w-auto\">\r\n            <p className=\"text-sm text-muted-foreground hidden md:block whitespace-nowrap\">\r\n              {filteredProperties.length} stays\r\n            </p>\r\n\r\n            <Select value={sortOption} onValueChange={setSortOption}>\r\n              <SelectTrigger className=\"w-[180px] rounded-full border-primary/20 bg-transparent h-10\">\r\n                <SelectValue placeholder=\"Sort by\" />\r\n              </SelectTrigger>\r\n              <SelectContent align=\"end\">\r\n                <SelectItem value=\"recommended\">Recommended</SelectItem>\r\n                <SelectItem value=\"price-low\">Price: Low to High</SelectItem>\r\n                <SelectItem value=\"price-high\">Price: High to Low</SelectItem>\r\n                <SelectItem value=\"rating\">Top Rated</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Active Filters Display */}\r\n        {(selectedTypes.length > 0 || selectedAmenities.length > 0 || selectedLocations.length > 0 || minGuests > 0) && (\r\n          <div className=\"flex flex-wrap gap-2 mb-8 animate-in fade-in slide-in-from-top-2\">\r\n            {selectedLocations.map(loc => (\r\n              <Badge key={loc} variant=\"secondary\" className=\"px-3 py-1 text-sm bg-primary/10 text-primary hover:bg-primary/20 transition-colors\">\r\n                <MapPin className=\"w-3 h-3 mr-1\" /> {loc}\r\n                <X className=\"w-3 h-3 ml-1 cursor-pointer hover:text-foreground\" onClick={() => toggleFilter(selectedLocations, setSelectedLocations, loc)} />\r\n              </Badge>\r\n            ))}\r\n            {selectedTypes.map(type => (\r\n              <Badge key={type} variant=\"secondary\" className=\"px-3 py-1 text-sm\">\r\n                {type}\r\n                <X className=\"w-3 h-3 ml-1 cursor-pointer hover:text-foreground\" onClick={() => toggleFilter(selectedTypes, setSelectedTypes, type)} />\r\n              </Badge>\r\n            ))}\r\n            {/* ... other badges ... purely visual indicators */}\r\n            <Button variant=\"ghost\" size=\"sm\" onClick={clearAllFilters} className=\"text-xs h-7\">Clear all</Button>\r\n          </div>\r\n        )}\r\n\r\n        {/* --- THE GRID: Exact Match to Homepage --- */}\r\n        {isLoading ? (\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n            {[1, 2, 3, 4, 5, 6].map((i) => (\r\n              <PropertyCardSkeleton key={i} />\r\n            ))}\r\n          </div>\r\n        ) : filteredProperties.length > 0 ? (\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 animate-fade-in\">\r\n            {filteredProperties.map((property) => (\r\n              <PropertyCard\r\n                key={property.id}\r\n                {...property}\r\n                name={property.title}\r\n                image={property.images?.[0] || 'https://via.placeholder.com/300'}\r\n                type={property.property_type || 'Stay'}\r\n                guests={property.max_guests}\r\n                price={property.price_per_night}\r\n              />\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <div className=\"flex flex-col items-center justify-center py-20 text-center border-2 border-dashed border-border rounded-xl\">\r\n            <div className=\"h-16 w-16 bg-neutral/10 rounded-full flex items-center justify-center mb-4 text-muted-foreground\">\r\n              <Filter className=\"h-8 w-8\" />\r\n            </div>\r\n            <h3 className=\"text-xl font-bold mb-2\">No matches found</h3>\r\n            <Button onClick={clearAllFilters} variant=\"link\">Clear all filters</Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Properties;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\pages\\PropertyDetail.tsx","messages":[{"ruleId":"prefer-const","severity":2,"message":"'current' is never reassigned. Use 'const' instead.","line":117,"column":13,"nodeType":"Identifier","messageId":"useConst","endLine":117,"endColumn":20,"fix":{"range":[4422,4452],"text":"const current = new Date(start);"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":129,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4782,4785],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4782,4785],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: 'activeImage'. Either include it or remove the dependency array.","line":144,"column":6,"nodeType":"ArrayExpression","endLine":144,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [activeImage, carouselApi]","fix":{"range":[5117,5130],"text":"[activeImage, carouselApi]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has missing dependencies: 'fetchAvailability' and 'fetchReviews'. Either include them or remove the dependency array.","line":182,"column":6,"nodeType":"ArrayExpression","endLine":182,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [fetchAvailability, fetchReviews, id, user]","fix":{"range":[6159,6169],"text":"[fetchAvailability, fetchReviews, id, user]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":265,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":265,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8786,8789],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8786,8789],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import React from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport Navbar from '@/components/Navbar';\nimport Footer from '@/components/Footer';\nimport { Button } from '@/components/ui/button';\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger\n} from '@/components/ui/tabs';\nimport {\n  Dialog,\n  DialogContent,\n  DialogTrigger,\n} from '@/components/ui/dialog';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Separator } from '@/components/ui/separator';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { CalendarIcon, Check, Home, MapPin, Star, Users, Utensils, Wifi, Plus, Minus, Coffee, ShoppingBag, Heart, Share2, MessageSquare, Map, Loader2, BedDouble, Bath, ArrowLeft, ChevronLeft, ChevronRight, X } from 'lucide-react';\nimport { Badge } from '@/components/ui/badge';\nimport { Calendar } from '@/components/ui/calendar';\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from '@/components/ui/popover';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport {\n  Sheet,\n  SheetClose,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n  SheetTrigger,\n} from \"@/components/ui/sheet\";\nimport { format } from 'date-fns';\nimport { Carousel, CarouselContent, CarouselItem, CarouselNext, CarouselPrevious } from '@/components/ui/carousel';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { toast } from 'sonner';\n\nimport { api, Property, Review } from '@/services/api';\nimport ReviewForm from '@/components/ReviewForm';\nimport SEO from '@/components/SEO';\nimport { PropertyDetailSkeleton } from '@/components/PropertyDetailSkeleton';\n\nconst PropertyDetail = () => {\n  const { id } = useParams();\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [property, setProperty] = React.useState<Property | null>(null);\n  const [isLoading, setIsLoading] = React.useState(true);\n  const [checkIn, setCheckIn] = React.useState<Date | undefined>(undefined);\n  const [checkOut, setCheckOut] = React.useState<Date | undefined>(undefined);\n  const [guests, setGuests] = React.useState(2);\n  const [activeImage, setActiveImage] = React.useState(0);\n  const [galleryView, setGalleryView] = React.useState<'grid' | 'carousel'>('grid');\n  const [isLiked, setIsLiked] = React.useState(false);\n  const [isBooking, setIsBooking] = React.useState(false);\n  const [showLoginDialog, setShowLoginDialog] = React.useState(false);\n  const [checkInOpen, setCheckInOpen] = React.useState(false);\n  const [checkOutOpen, setCheckOutOpen] = React.useState(false);\n  const [mobileBookingOpen, setMobileBookingOpen] = React.useState(false);\n  const [reviews, setReviews] = React.useState<Review[]>([]);\n  const [disabledDates, setDisabledDates] = React.useState<Date[]>([]);\n\n  // M-Pesa State\n  const [paymentStatus, setPaymentStatus] = React.useState<'idle' | 'processing' | 'success' | 'failed'>('idle');\n  const [phoneNumber, setPhoneNumber] = React.useState('');\n  const [showPaymentInput, setShowPaymentInput] = React.useState(false);\n\n  const fetchReviews = async () => {\n    if (!id) return;\n    try {\n      console.log('Fetching reviews for property:', id);\n      const data = await api.getReviews(id);\n      console.log('Fetched reviews:', data);\n      setReviews(data);\n    } catch (error) {\n      console.error('Error fetching reviews:', error);\n    }\n  };\n\n  const fetchAvailability = async () => {\n    if (!id) return;\n    try {\n      const bookings = await api.getPropertyBookings(id);\n      const disabled: Date[] = [];\n      bookings.forEach(booking => {\n        // Parse dates as local time to avoid timezone offsets shifting the day\n        const [startYear, startMonth, startDay] = booking.check_in.split('-').map(Number);\n        const [endYear, endMonth, endDay] = booking.check_out.split('-').map(Number);\n\n        const start = new Date(startYear, startMonth - 1, startDay);\n        const end = new Date(endYear, endMonth - 1, endDay);\n\n        // Iterate from start to end (inclusive of start, exclusive of end)\n        let current = new Date(start);\n        while (current < end) {\n          disabled.push(new Date(current));\n          current.setDate(current.getDate() + 1);\n        }\n      });\n      setDisabledDates(disabled);\n    } catch (error) {\n      console.error('Error fetching availability:', error);\n    }\n  };\n\n  const [carouselApi, setCarouselApi] = React.useState<any>();\n\n  React.useEffect(() => {\n    if (!carouselApi) return;\n\n    const onSelect = () => {\n      setActiveImage(carouselApi.selectedScrollSnap());\n    };\n\n    carouselApi.on(\"select\", onSelect);\n    carouselApi.scrollTo(activeImage); // Sync initial state\n\n    return () => {\n      carouselApi.off(\"select\", onSelect);\n    };\n  }, [carouselApi]);\n\n  // Keep this to allow clicking thumbnails to control carousel\n  React.useEffect(() => {\n    if (!carouselApi) return;\n    if (carouselApi.selectedScrollSnap() !== activeImage) {\n      carouselApi.scrollTo(activeImage);\n    }\n  }, [activeImage, carouselApi]);\n\n  React.useEffect(() => {\n    const loadProperty = async () => {\n      try {\n        if (!id) return;\n        const data = await api.getProperty(id);\n        setProperty(data);\n      } catch (error) {\n        console.error('Error fetching property:', error);\n        toast.error('Failed to load property details');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    const checkFavoriteStatus = async () => {\n      if (!user || !id) return;\n      try {\n        const status = await api.getFavoriteStatus(id, user.id);\n        setIsLiked(status);\n      } catch (error) {\n        console.error('Error checking favorite status:', error);\n      }\n    };\n\n    loadProperty();\n    fetchReviews();\n    fetchAvailability();\n    checkFavoriteStatus();\n  }, [id, user]);\n\n  const checkAuth = () => {\n    if (!user) {\n      setShowLoginDialog(true);\n      return false;\n    }\n    return true;\n  };\n\n  const handleBookNow = async () => {\n    if (!checkIn || !checkOut) {\n      toast.error(\"Please select a check-in and check-out date first.\");\n      setMobileBookingOpen(true);\n      return;\n    }\n\n    const isAuthed = checkAuth();\n    if (!isAuthed) return;\n\n    if (!user || !property) return;\n\n    if (user.id === property.host_id) {\n      toast.error(\"You cannot book your own property\");\n      return;\n    }\n\n    if (guests > property.max_guests) {\n      toast.error(`This property only accommodates up to ${property.max_guests} guests`);\n      return;\n    }\n\n    // 1. Show Payment Input if not already shown\n    if (!showPaymentInput) {\n      setShowPaymentInput(true);\n      // Determine nights and total price for UI feedback\n      const nights = Math.ceil((checkOut.getTime() - checkIn.getTime()) / (1000 * 60 * 60 * 24));\n      const totalPrice = (property.price_per_night * nights) + 2500; // Including cleaning fee\n      toast.info(`Total to pay: KES ${totalPrice.toLocaleString()}. Please enter your M-Pesa number.`);\n      return;\n    }\n\n    // 2. Validate Phone Number\n    if (!phoneNumber || phoneNumber.length < 10) {\n      toast.error(\"Please enter a valid M-Pesa phone number\");\n      return;\n    }\n\n    try {\n      setIsBooking(true);\n      setPaymentStatus('processing');\n\n      // 3. Check Availability AGAIN before payment\n      const isAvailable = await api.checkAvailability(property.id, checkIn, checkOut);\n      if (!isAvailable) {\n        toast.error('These dates are no longer available. Please choose another range.');\n        setIsBooking(false);\n        setPaymentStatus('idle');\n        return;\n      }\n\n      const nights = Math.ceil((checkOut.getTime() - checkIn.getTime()) / (1000 * 60 * 60 * 24));\n      const totalPrice = (property.price_per_night * nights) + 2500; // Add cleaning fee logic later\n\n      // 4. Process Payment (Simulation)\n      toast.loading(\"Sending STK Push to your phone...\");\n      await api.processMpesaPayment(phoneNumber, totalPrice);\n      toast.dismiss();\n      toast.success(\"Payment Received! Confiming Booking...\");\n      setPaymentStatus('success');\n\n      // 5. Create Booking\n      await api.createBooking({\n        property_id: property.id,\n        guest_id: user.id,\n        check_in: checkIn,\n        check_out: checkOut,\n        total_price: totalPrice\n      });\n\n      toast.success('Booking confirmed! Redirecting to dashboard...');\n      setTimeout(() => navigate('/dashboard'), 1500);\n\n    } catch (error: any) {\n      console.error('Error creating booking:', error);\n      setPaymentStatus('failed');\n\n      // Friendly error handling\n      if (error.message?.includes('could not choose the best candidate function')) {\n        toast.error('System Update: Please refresh the page and try again (Availability Check Updated).');\n      } else if (error.message?.includes('violates row-level security')) {\n        toast.error('Unable to verify permissions. Please check your login status.');\n      } else {\n        toast.error(error.message || 'Payment failed. Please try again.');\n      }\n    } finally {\n      setIsBooking(false);\n    }\n  };\n\n  if (isLoading) {\n    return <PropertyDetailSkeleton />;\n  }\n\n  if (!property) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center flex-col gap-4\">\n        <h2 className=\"text-2xl font-bold\">Property not found</h2>\n        <Button onClick={() => navigate('/')}>Return Home</Button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <SEO\n        title={`${property.title} - Chaka Stays`}\n        description={`Book ${property.title} in ${property.location}. ${property.description.substring(0, 150)}...`}\n        image={property.images[0]}\n      />\n      <Navbar />\n      <main className=\"flex-grow pb-16 pt-24\">\n        <div className=\"chaka-container\">\n          {/* Header Section */}\n          <div className=\"mb-6\">\n            <div className=\"flex items-center gap-4 mb-4\">\n              <h1 className=\"text-3xl md:text-5xl font-serif font-bold text-foreground leading-tight\">{property.title}</h1>\n              {property.is_banned && (\n                <Badge variant=\"destructive\" className=\"self-center h-8 px-3 text-sm uppercase tracking-wide\">\n                  Banned\n                </Badge>\n              )}\n            </div>\n            <div className=\"flex flex-wrap items-center gap-4 text-muted-foreground text-sm font-medium\">\n              <div className=\"flex items-center\">\n                <Star className=\"h-4 w-4 text-secondary fill-secondary mr-1\" />\n                <span className=\"text-foreground\">{property.rating}</span>\n                <span className=\"mx-1\">Â·</span>\n                <span className=\"underline decoration-muted-foreground/50\">{property.review_count} reviews</span>\n              </div>\n              <span className=\"hidden sm:inline\">Â·</span>\n              <div className=\"flex items-center\">\n                <MapPin className=\"h-4 w-4 mr-1 text-primary\" />\n                {property.location}\n              </div>\n              <div className=\"ml-auto flex gap-2\">\n                <Button variant=\"ghost\" size=\"sm\" className=\"hover:bg-neutral/10\" onClick={async () => {\n                  if (!user) {\n                    setShowLoginDialog(true);\n                    return;\n                  }\n                  try {\n                    if (isLiked) {\n                      await api.removeFavorite(property.id, user.id);\n                      setIsLiked(false);\n                      toast.success(\"Removed from favorites\");\n                    } else {\n                      await api.addFavorite(property.id, user.id);\n                      setIsLiked(true);\n                      toast.success(\"Saved to favorites\");\n                    }\n                  } catch (error) {\n                    toast.error(\"Failed to update favorites\");\n                  }\n                }}>\n                  <Heart className={`h-5 w-5 mr-2 ${isLiked ? 'fill-destructive text-destructive' : ''}`} /> {isLiked ? 'Saved' : 'Save'}\n                </Button>\n                <Button variant=\"ghost\" size=\"sm\" className=\"hover:bg-neutral/10\" onClick={() => {\n                  navigator.clipboard.writeText(window.location.href);\n                  toast.success(\"Link copied to clipboard!\");\n                }}>\n                  <Share2 className=\"h-5 w-5 mr-2\" /> Share\n                </Button>\n              </div>\n            </div>\n          </div>\n\n          {/* Mobile Image Carousel */}\n          <div className=\"lg:hidden mb-8 -mx-4 sm:mx-0 relative\">\n            <Carousel className=\"w-full\" setApi={setCarouselApi}>\n              <CarouselContent>\n                {property.images.map((image, index) => (\n                  <CarouselItem key={index}>\n                    <div className=\"relative aspect-[4/3] sm:rounded-xl overflow-hidden\">\n                      <img\n                        src={image}\n                        alt={`View ${index + 1}`}\n                        className=\"w-full h-full object-cover\"\n                        onClick={() => {\n                          setActiveImage(index);\n                          setGalleryView('carousel');\n                        }}\n                      />\n                    </div>\n                  </CarouselItem>\n                ))}\n              </CarouselContent>\n            </Carousel>\n\n            {/* Custom Pagination Dots for Mobile Inline Carousel */}\n            <div className=\"absolute bottom-4 left-0 right-0 flex justify-center gap-1.5 z-10\">\n              {property.images.slice(0, 5).map((_, idx) => (\n                <div\n                  key={idx}\n                  className={`h-1.5 rounded-full transition-all duration-300 ${activeImage === idx ? 'w-4 bg-white' : 'w-1.5 bg-white/50'}`}\n                />\n              ))}\n              {property.images.length > 5 && <div className={`h-1.5 w-1.5 rounded-full bg-white/50`} />}\n            </div>\n\n            <div className=\"absolute bottom-4 right-4 bg-black/60 text-white text-[10px] px-2 py-0.5 rounded-full font-medium pointer-events-none\">\n              {activeImage + 1} / {property.images.length}\n            </div>\n          </div>\n\n          {/* Desktop Image Grid */}\n          <div className=\"hidden lg:flex gap-2 rounded-2xl overflow-hidden shadow-sm h-[60vh] mb-12\">\n            <div className={`relative h-full flex ${property.images.length > 1 ? 'w-1/2' : 'w-full'}`}>\n              <img\n                src={property.images[0] || \"https://images.unsplash.com/photo-1512918760383-ed5341cf3e3b?auto=format&fit=crop&w=1600&q=80\"}\n                alt=\"Main view\"\n                className=\"w-full h-full object-cover hover:scale-105 transition-transform duration-700 cursor-pointer\"\n                onClick={() => {\n                  setActiveImage(0);\n                  setGalleryView('carousel');\n                }}\n              />\n            </div>\n\n            {property.images.length > 1 && (\n              <div className=\"grid grid-rows-2 gap-2 h-full w-1/2\">\n                <div className=\"relative h-full overflow-hidden\">\n                  <img\n                    src={property.images[1]}\n                    alt=\"Interior\"\n                    className=\"w-full h-full object-cover hover:scale-105 transition-transform duration-700\"\n                  />\n                </div>\n                <div className=\"relative h-full overflow-hidden\">\n                  <img\n                    src={property.images[2] || property.images[0]}\n                    alt=\"Details\"\n                    className=\"w-full h-full object-cover hover:scale-105 transition-transform duration-700\"\n                  />\n                  <Dialog onOpenChange={(open) => {\n                    if (!open) setGalleryView('grid');\n                  }}>\n                    <DialogTrigger asChild>\n                      <Button variant=\"secondary\" className=\"absolute bottom-4 right-4 text-xs bg-white text-black hover:bg-neutral\">\n                        View all photos\n                      </Button>\n                    </DialogTrigger>\n                    <DialogContent className=\"max-w-[100vw] h-[100vh] p-0 border-0 rounded-none bg-background flex flex-col [&>button]:hidden\">\n                      {/* Custom Header */}\n                      <div className=\"flex items-center justify-between px-4 py-3 border-b border-border\">\n                        {galleryView === 'carousel' ? (\n                          <Button variant=\"ghost\" onClick={() => setGalleryView('grid')} className=\"gap-2 pl-0 hover:bg-transparent\">\n                            <ArrowLeft className=\"h-5 w-5\" /> Gallery\n                          </Button>\n                        ) : (\n                          <h2 className=\"text-lg font-semibold\">Photo Gallery</h2>\n                        )}\n\n                        <div className=\"flex items-center gap-4\">\n                          <DialogTrigger asChild>\n                            <Button variant=\"ghost\" size=\"icon\" className=\"rounded-full hover:bg-neutral/10\">\n                              <X className=\"h-5 w-5\" />\n                            </Button>\n                          </DialogTrigger>\n                        </div>\n                      </div>\n\n                      {galleryView === 'grid' ? (\n                        <div className=\"overflow-y-auto p-4 md:p-8\">\n                          <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 max-w-7xl mx-auto\">\n                            {property.images.map((image, index) => (\n                              <div\n                                key={index}\n                                className={`relative cursor-pointer group overflow-hidden rounded-lg aspect-[4/3]`}\n                                onClick={() => {\n                                  setActiveImage(index);\n                                  setGalleryView('carousel');\n                                }}\n                              >\n                                <img\n                                  src={image}\n                                  alt={`Photo ${index + 1}`}\n                                  className=\"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110\"\n                                />\n                                <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors\" />\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n                      ) : (\n                        <div className=\"flex flex-1 overflow-hidden bg-black/95\">\n                          {/* Main Carousel Area */}\n                          <div className=\"flex-1 flex flex-col relative justify-center\">\n                            <Carousel\n                              className=\"w-full h-full flex items-center\"\n                              setApi={(api) => {\n                                if (!api) return;\n                                setCarouselApi(api);\n                                api.scrollTo(activeImage, true);\n                                api.on(\"select\", () => {\n                                  setActiveImage(api.selectedScrollSnap());\n                                });\n                              }}\n                            >\n                              <CarouselContent className=\"h-full\">\n                                {property.images.map((img, index) => (\n                                  <CarouselItem key={index} className=\"h-full flex items-center justify-center pt-4 pb-20 lg:pb-4\">\n                                    <div className=\"relative w-full h-full flex items-center justify-center p-4\">\n                                      <img\n                                        src={img}\n                                        alt={`Full view ${index + 1}`}\n                                        className=\"max-w-full max-h-full object-contain\"\n                                      />\n                                    </div>\n                                  </CarouselItem>\n                                ))}\n                              </CarouselContent>\n                              <CarouselPrevious className=\"left-4 bg-white/10 hover:bg-white/20 text-white border-none hidden md:flex\" />\n                              <CarouselNext className=\"right-4 bg-white/10 hover:bg-white/20 text-white border-none hidden md:flex\" />\n                            </Carousel>\n\n                            {/* Mobile Info Overlay (since sidebar is hidden on mobile) */}\n                            <div className=\"lg:hidden absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/90 to-transparent text-white pb-8\">\n                              <h3 className=\"font-semibold text-lg\">{property.title}</h3>\n                              <p className=\"text-sm opacity-80\">{activeImage + 1} / {property.images.length}</p>\n                            </div>\n                          </div>\n\n                          {/* Thumbnails Strip (Desktop Only) */}\n                          <div className=\"hidden lg:flex h-20 bg-black/80 items-center justify-center gap-2 overflow-x-auto px-4 py-2 absolute bottom-0 left-0 right-80 z-20\">\n                            {property.images.map((img, idx) => (\n                              <button\n                                key={idx}\n                                onClick={() => setActiveImage(idx)} // This logic needs to update carousel api if we had access, but for now it updates state which might not sync reverse. \n                                // Actually, let's keep it simple. Ideally we'd use the API to scroll. \n                                // For now, clicking thumbnails in this new setup might depend on the setApi above re-scrolling when activeImage changes.\n                                // But `setApi` only runs once. We need a useEffect to scroll when activeImage changes or just rely on the Carousel internal state.\n                                className={`relative h-14 w-20 flex-shrink-0 rounded-md overflow-hidden transition-all ${activeImage === idx ? 'ring-2 ring-white opacity-100' : 'opacity-50 hover:opacity-80'}`}\n                              >\n                                <img src={img} alt=\"thumbnail\" className=\"w-full h-full object-cover\" />\n                              </button>\n                            ))}\n                          </div>\n\n                          {/* Right Sidebar - Info */}\n                          <div className=\"w-80 border-l border-border bg-background hidden lg:flex flex-col p-6 overflow-y-auto\">\n                            <div className=\"space-y-6\">\n                              <div className=\"flex justify-between items-start\">\n                                <div>\n                                  <h3 className=\"font-serif font-bold text-xl\">{property.title}</h3>\n                                  <p className=\"text-sm text-muted-foreground mt-1 flex items-center\">\n                                    <MapPin className=\"h-3 w-3 mr-1\" /> {property.location}\n                                  </p>\n                                </div>\n                              </div>\n\n                              <div className=\"flex items-center justify-between p-4 bg-primary/5 rounded-lg border border-primary/10\">\n                                <div className=\"flex items-center gap-3\">\n                                  <div className=\"h-10 w-10 bg-primary text-primary-foreground rounded-lg flex items-center justify-center font-bold text-lg\">\n                                    {property.rating}\n                                  </div>\n                                  <div>\n                                    <div className=\"font-semibold text-sm\">Very Good</div>\n                                    <div className=\"text-xs text-muted-foreground\">{property.review_count} reviews</div>\n                                  </div>\n                                </div>\n                              </div>\n\n\n\n                              <div className=\"pt-6 border-t border-border mt-auto\">\n                                <div className=\"flex justify-between items-baseline mb-4\">\n                                  <span className=\"text-xs text-muted-foreground\">Price starts at</span>\n                                  <span className=\"text-xl font-bold text-primary\">KES {property.price_per_night.toLocaleString()}</span>\n                                </div>\n                                <DialogTrigger asChild>\n                                  <Button\n                                    onClick={() => {\n                                      // Scroll to booking section if dates aren't selected\n                                      if (!checkIn || !checkOut) {\n                                        document.querySelector('.lg\\\\:w-1\\\\/3')?.scrollIntoView({ behavior: 'smooth' });\n                                        // Or specifically focus the date picker if possible, but scroll is good enough for now\n                                      } else {\n                                        handleBookNow();\n                                      }\n                                    }}\n                                    className=\"w-full h-12 text-lg\"\n                                  >\n                                    Reserve now\n                                  </Button>\n                                </DialogTrigger>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      )}\n                    </DialogContent>\n                  </Dialog>\n                </div>\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex flex-col lg:flex-row gap-16 relative pb-24 lg:pb-0\">\n            {/* Left Content */}\n            <div className=\"lg:w-2/3 space-y-10\">\n\n              {/* Quick Summary */}\n              <div className=\"flex flex-wrap gap-6 py-8 border-b border-border\">\n                <div className=\"flex items-center gap-2 px-4 py-2 bg-secondary/10 rounded-full border border-secondary/20\">\n                  <Users className=\"h-5 w-5 text-secondary\" />\n                  <span className=\"font-medium text-secondary-foreground\">{property.max_guests} guests</span>\n                </div>\n                <div className=\"flex items-center gap-2 px-4 py-2 bg-secondary/10 rounded-full border border-secondary/20\">\n                  <Home className=\"h-5 w-5 text-secondary\" />\n                  <span className=\"font-medium text-secondary-foreground\">{property.bedrooms} bedrooms</span>\n                </div>\n                <div className=\"flex items-center gap-2 px-4 py-2 bg-secondary/10 rounded-full border border-secondary/20\">\n                  <BedDouble className=\"h-5 w-5 text-secondary\" />\n                  <span className=\"font-medium text-secondary-foreground\">{property.beds} beds</span>\n                </div>\n                <div className=\"flex items-center gap-2 px-4 py-2 bg-secondary/10 rounded-full border border-secondary/20\">\n                  <Bath className=\"h-5 w-5 text-secondary\" />\n                  <span className=\"font-medium text-secondary-foreground\">{property.baths} baths</span>\n                </div>\n              </div>\n\n              {/* Host Info */}\n              <div className=\"flex items-center gap-4 py-4 border-b border-border\">\n                <Avatar className=\"h-14 w-14 border border-border\">\n                  <AvatarImage src={property.host?.avatar_url} className=\"object-cover\" />\n                  <AvatarFallback className=\"bg-primary/10 text-primary font-medium text-lg\">\n                    {property.host?.full_name?.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase() || 'HO'}\n                  </AvatarFallback>\n                </Avatar>\n                <div>\n                  <div className=\"font-semibold text-lg\">Hosted by {property.host?.full_name || 'Host'}</div>\n                  <div className=\"text-sm text-muted-foreground\">Joined {new Date(property.created_at).getFullYear()}</div>\n                </div>\n              </div>\n\n              {/* Description */}\n              <div className=\"py-2 space-y-4\">\n                <h3 className=\"font-serif text-2xl font-semibold\">About this space</h3>\n                <p className=\"text-lg leading-relaxed text-muted-foreground\">{property.description}</p>\n              </div>\n\n              {/* Amenities */}\n              <div className=\"py-6 border-t border-border\">\n                <h3 className=\"font-serif text-2xl font-semibold mb-6\">What this place offers</h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  {property.amenities.map((amenity, index) => (\n                    <div key={index} className=\"flex items-center gap-3\">\n                      <div className=\"p-2 bg-neutral/10 rounded-full\">\n                        <Check className=\"h-4 w-4 text-primary\" />\n                      </div>\n                      <span className=\"text-base text-foreground/80\">{amenity}</span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n\n            {/* Reviews Section */}\n            <div className=\"py-8 border-t border-border\">\n              <div className=\"flex items-center gap-2 mb-6\">\n                <Star className=\"h-6 w-6 text-primary fill-primary\" />\n                <h3 className=\"font-serif text-2xl font-semibold\">\n                  {reviews.length > 0 ? `${property.rating} Â· ${reviews.length} reviews` : 'No reviews (yet)'}\n                </h3>\n              </div>\n\n              {/* Review Form */}\n              {user && user.id !== property.host_id && !reviews.some(r => r.user_id === user?.id) && (\n                <div className=\"mb-8\">\n                  <ReviewForm\n                    propertyId={property.id}\n                    userId={user.id}\n                    onReviewSubmitted={fetchReviews}\n                  />\n                </div>\n              )}\n\n              {/* Reviews List */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n                {reviews.map((review) => (\n                  <div key={review.id} className=\"space-y-4\">\n                    <div className=\"flex items-center gap-3\">\n                      <Avatar className=\"h-10 w-10 border border-border\">\n                        <AvatarImage src={review.user?.avatar_url} className=\"object-cover\" />\n                        <AvatarFallback className=\"bg-primary/10 text-primary font-medium\">\n                          {review.user?.full_name?.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase() || 'U'}\n                        </AvatarFallback>\n                      </Avatar>\n                      <div>\n                        <div className=\"font-semibold\">{review.user?.full_name || 'Guest'}</div>\n                        <div className=\"text-sm text-muted-foreground\">\n                          {new Date(review.created_at).toLocaleDateString()}\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"flex gap-1\">\n                      {[...Array(5)].map((_, i) => (\n                        <Star\n                          key={i}\n                          className={`h-4 w-4 ${i < review.rating ? 'fill-primary text-primary' : 'text-neutral'}`}\n                        />\n                      ))}\n                    </div>\n                    <p className=\"text-foreground/80 leading-relaxed\">\n                      {review.comment}\n                    </p>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n          </div>\n\n          {/* Desktop Booking Sidebar */}\n          <div className=\"hidden lg:block lg:w-1/3\">\n            <div className=\"sticky top-24\">\n              <div className=\"glass-card rounded-xl shadow-xl overflow-hidden p-6 border border-white/20\">\n                <div className=\"flex justify-between items-baseline mb-6\">\n                  <div>\n                    <span className=\"text-2xl font-bold font-serif text-primary\">KES {property.price_per_night}</span>\n                    <span className=\"text-muted-foreground\"> night</span>\n                  </div>\n                  <div className=\"flex items-center text-sm font-medium\">\n                    <Star className=\"h-4 w-4 bg-secondary text-white rounded-sm p-0.5 mr-1\" />\n                    {property.rating} Â· <span className=\"text-muted-foreground ml-1 underline\">{property.review_count} reviews</span>\n                  </div>\n                </div>\n\n                <div className=\"space-y-4\">\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div className=\"p-3 border rounded-tl-lg rounded-bl-none border-neutral\">\n                      <Label className=\"text-xs uppercase font-bold text-muted-foreground\">Check-in</Label>\n                      <CalendarIcon className=\"h-4 w-4 text-muted-foreground mb-1 block md:hidden\" />\n                      <Popover open={checkInOpen} onOpenChange={setCheckInOpen}>\n                        <PopoverTrigger asChild>\n                          <button className=\"w-full text-left font-normal text-sm pt-1 focus:outline-none\">\n                            {checkIn ? format(checkIn, \"dd/MM/yyyy\") : \"Add date\"}\n                          </button>\n                        </PopoverTrigger>\n                        <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                          <Calendar\n                            mode=\"single\"\n                            selected={checkIn}\n                            onSelect={(date) => {\n                              setCheckIn(date);\n                              setCheckInOpen(false);\n                              // Reset checkout if it's before new check-in\n                              if (checkOut && date && checkOut <= date) {\n                                setCheckOut(undefined);\n                              }\n                            }}\n                            disabled={(date) => {\n                              // Disable past dates\n                              if (date < new Date(new Date().setHours(0, 0, 0, 0))) return true;\n                              // Disable booked dates\n                              return disabledDates.some(d => d.toDateString() === date.toDateString());\n                            }}\n                            initialFocus\n                          />\n                        </PopoverContent>\n                      </Popover>\n                    </div>\n                    <div className=\"p-3 border rounded-tr-lg rounded-br-none border-l-0 border-neutral\">\n                      <Label className=\"text-xs uppercase font-bold text-muted-foreground\">Check-out</Label>\n                      <Popover open={checkOutOpen} onOpenChange={setCheckOutOpen}>\n                        <PopoverTrigger asChild>\n                          <button\n                            className={`w-full text-left font-normal text-sm pt-1 focus:outline-none ${!checkIn ? 'text-muted-foreground cursor-not-allowed' : ''}`}\n                            disabled={!checkIn}\n                          >\n                            {checkOut ? format(checkOut, \"dd/MM/yyyy\") : (checkIn ? \"Add date\" : \"Select check-in first\")}\n                          </button>\n                        </PopoverTrigger>\n                        <PopoverContent className=\"w-auto p-0\" align=\"end\">\n                          <Calendar\n                            mode=\"single\"\n                            selected={checkOut}\n                            onSelect={(date) => {\n                              setCheckOut(date);\n                              setCheckOutOpen(false);\n                            }}\n                            disabled={(date) => {\n                              // Disable past dates OR dates before checkIn\n                              if (checkIn && date <= checkIn) return true;\n                              if (date < new Date(new Date().setHours(0, 0, 0, 0))) return true;\n                              // Disable booked dates\n                              return disabledDates.some(d => d.toDateString() === date.toDateString());\n                            }}\n                            initialFocus\n                          />\n                        </PopoverContent>\n                      </Popover>\n                    </div>\n                  </div>\n                  <div className=\"p-3 border rounded-b-lg border-t-0 border-neutral mt-0\">\n                    <Label className=\"text-xs uppercase font-bold text-muted-foreground\">Guests</Label>\n                    <Select value={guests.toString()} onValueChange={(value) => setGuests(parseInt(value))}>\n                      <SelectTrigger className=\"border-0 p-0 h-auto focus:ring-0\">\n                        <SelectValue placeholder=\"1 guest\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {[...Array(property.max_guests)].map((_, i) => (\n                          <SelectItem key={i + 1} value={(i + 1).toString()}>\n                            {i + 1} {(i + 1) === 1 ? 'guest' : 'guests'}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  {checkIn && checkOut && (\n                    <>\n                      <div className=\"flex justify-between\">\n                        <span>Cleaning fee</span>\n                        <span>KES 2,500</span>\n                      </div>\n                      <div className=\"flex justify-between text-foreground font-bold pt-4 border-t text-lg cursor-pointer hover:underline\" onClick={() => setShowPaymentInput(!showPaymentInput)}>\n                        <span>Total (KES)</span>\n                        <span>KES {((property.price_per_night * Math.ceil((checkOut.getTime() - checkIn.getTime()) / (1000 * 60 * 60 * 24))) + 2500).toLocaleString()}</span>\n                      </div>\n                    </>\n                  )}\n                </div>\n\n                {/* Payment Input Section */}\n                {showPaymentInput && (\n                  <div className=\"animate-in slide-in-from-top-2 fade-in duration-300 bg-emerald-50 dark:bg-emerald-950/30 p-4 rounded-lg border border-emerald-200 dark:border-emerald-800\">\n                    <Label className=\"text-sm font-semibold text-emerald-800 dark:text-emerald-400 mb-2 block\">\n                      M-Pesa Phone Number\n                    </Label>\n                    <div className=\"flex gap-2\">\n                      <Input\n                        placeholder=\"07XX XXX XXX\"\n                        value={phoneNumber}\n                        onChange={(e) => setPhoneNumber(e.target.value)}\n                        className=\"bg-white dark:bg-black/40 border-emerald-200 focus-visible:ring-emerald-500\"\n                      />\n                    </div>\n                    <p className=\"text-[10px] text-emerald-600 dark:text-emerald-400 mt-2\">\n                      A prompt will be sent to your phone to complete the payment.\n                    </p>\n                  </div>\n                )}\n\n                <Button\n                  className={`w-full h-12 text-lg shadow-lg transition-all duration-300 ${showPaymentInput\n                    ? 'bg-emerald-600 hover:bg-emerald-700 text-white shadow-emerald-500/20'\n                    : 'bg-primary hover:bg-primary/90 shadow-primary/20'\n                    }`}\n                  onClick={handleBookNow}\n                  disabled={isBooking || (showPaymentInput && !phoneNumber)}\n                >\n                  {isBooking ? (\n                    <>\n                      <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                      {paymentStatus === 'processing' ? 'Waiting for M-Pesa...' : 'Processing...'}\n                    </>\n                  ) : (\n                    showPaymentInput ? 'Pay & Book' : 'Reserve'\n                  )}\n                </Button>\n\n                <div className=\"text-center text-sm text-muted-foreground py-2\">\n                  {showPaymentInput ? \"Secure M-Pesa Payment\" : \"You won't be charged yet\"}\n                </div>\n                {checkIn && checkOut && (\n                  <div className=\"flex justify-between text-foreground font-bold pt-4 border-t text-lg\">\n                    <span>Total before taxes</span>\n                    <span>KES {(property.price_per_night * Math.ceil((checkOut.getTime() - checkIn.getTime()) / (1000 * 60 * 60 * 24)) + 2500).toLocaleString()}</span>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n\n      {/* Mobile Fixed Bottom Bar */}\n      <div className=\"lg:hidden fixed bottom-0 left-0 right-0 p-4 bg-background border-t border-border z-40 flex items-center justify-between safe-area-bottom shadow-[0_-5px_10px_rgba(0,0,0,0.05)]\">\n        <Sheet open={mobileBookingOpen} onOpenChange={setMobileBookingOpen}>\n          <SheetTrigger asChild>\n            <div className=\"cursor-pointer\">\n              <div className=\"flex items-baseline gap-1\">\n                <span className=\"text-xl font-bold font-serif text-primary\">KES {property.price_per_night}</span>\n                <span className=\"text-sm text-muted-foreground\">/ night</span>\n              </div>\n              <div className={`text-xs underline font-medium ${!checkIn || !checkOut ? 'text-primary animate-pulse decoration-2' : 'text-muted-foreground'}`}>\n                {checkIn && checkOut ? `${Math.ceil((checkOut.getTime() - checkIn.getTime()) / (1000 * 60 * 60 * 24))} nights` : 'Select dates'}\n              </div>\n            </div>\n          </SheetTrigger>\n          <SheetContent side=\"bottom\" className=\"h-[90vh] flex flex-col rounded-t-xl sm:max-w-none\">\n            <SheetHeader className=\"mb-2\">\n              <SheetTitle>Select Dates</SheetTitle>\n              <SheetDescription>\n                Add your travel dates for exact pricing\n              </SheetDescription>\n            </SheetHeader>\n            <div className=\"flex-1 overflow-y-auto pb-12 px-1\">\n              <div className=\"flex flex-col gap-6\">\n                <div className=\"space-y-3\">\n                  <Label className=\"text-base font-semibold\">Check-in Date</Label>\n                  <div className=\"border rounded-lg p-2 bg-card flex justify-center\">\n                    <Calendar\n                      mode=\"single\"\n                      selected={checkIn}\n                      onSelect={(date) => {\n                        setCheckIn(date);\n                        // Reset checkout if it's before new check-in\n                        if (checkOut && date && checkOut <= date) {\n                          setCheckOut(undefined);\n                        }\n                      }}\n                      disabled={(date) => {\n                        if (date < new Date(new Date().setHours(0, 0, 0, 0))) return true;\n                        return disabledDates.some(d => d.toDateString() === date.toDateString());\n                      }}\n                      className=\"rounded-md\"\n                    />\n                  </div>\n                </div>\n                <div className=\"space-y-3\">\n                  <Label className=\"text-base font-semibold\">Check-out Date</Label>\n                  <div className=\"border rounded-lg p-2 bg-card flex justify-center\">\n                    <Calendar\n                      mode=\"single\"\n                      selected={checkOut}\n                      onSelect={setCheckOut}\n                      disabled={(date) => {\n                        if (checkIn && date <= checkIn) return true;\n                        if (date < new Date(new Date().setHours(0, 0, 0, 0))) return true;\n                        return disabledDates.some(d => d.toDateString() === date.toDateString());\n                      }}\n                      className=\"rounded-md\"\n                    />\n                  </div>\n                </div>\n                <SheetClose asChild>\n                  <Button className=\"w-full mt-2 h-12 text-base shadow-lg bg-primary text-primary-foreground mb-8\">Confirm Dates</Button>\n                </SheetClose>\n              </div>\n            </div>\n          </SheetContent>\n        </Sheet>\n\n        <Button onClick={handleBookNow} disabled={isBooking} className=\"bg-primary px-8 shadow-lg shadow-primary/25\">\n          {isBooking ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : (!checkIn || !checkOut ? 'Check Availability' : 'Reserve')}\n        </Button>\n      </div>\n\n      <Footer />\n      <AlertDialog open={showLoginDialog} onOpenChange={setShowLoginDialog}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Account Required</AlertDialogTitle>\n            <AlertDialogDescription>\n              To ensure a secure booking experience, you need to be signed in to reserve this property.\n              It only takes a moment to create an account!\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter className=\"flex-col sm:flex-row gap-2\">\n            <AlertDialogCancel className=\"mt-0\">Cancel</AlertDialogCancel>\n            <Button variant=\"outline\" onClick={() => navigate('/auth')}>\n              Sign In\n            </Button>\n            <AlertDialogAction onClick={() => navigate('/signup')}>Create Account</AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n};\n\nexport default PropertyDetail;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\pages\\SignUp.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":67,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2397,2400],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2397,2400],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { User, Home, Loader2, Mail, ArrowLeft } from 'lucide-react';\r\nimport { useToast } from '@/components/ui/use-toast';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { DEV_SERVER_URL, getCurrentOrigin } from '@/config/google';\r\n\r\n\r\nconst SignUp: React.FC = () => {\r\n  const [userType, setUserType] = useState<'guest' | 'host'>('guest');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isSuccess, setIsSuccess] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: '',\r\n    phone: '',\r\n    full_name: '',\r\n    business_name: '',\r\n    owner_name: '',\r\n    business_email: '',\r\n    business_phone: ''\r\n  });\r\n  const { register } = useAuth();\r\n  const navigate = useNavigate();\r\n  const { toast } = useToast();\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleUserTypeChange = (value: string) => {\r\n    setUserType(value as 'guest' | 'host');\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const data = {\r\n        user_type: userType,\r\n        ...formData,\r\n        // Map host specific fields to generic auth fields if needed\r\n        email: userType === 'host' ? formData.business_email : formData.email,\r\n        full_name: userType === 'host' ? formData.owner_name : formData.full_name,\r\n        phone: userType === 'host' ? formData.business_phone : formData.phone,\r\n      };\r\n      const { error } = await register(data);\r\n\r\n      if (error) {\r\n        throw error;\r\n      }\r\n\r\n      setIsSuccess(true);\r\n      toast({\r\n        title: 'Account created',\r\n        description: 'Please confirm your email address.',\r\n      });\r\n      // Removed navigate('/dashboard') to show success screen\r\n    } catch (error: any) {\r\n      console.error('Registration error:', error);\r\n      toast({\r\n        title: 'Registration Error',\r\n        description: error.message || 'Registration failed. Please try again.',\r\n        variant: 'destructive',\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  if (isSuccess) {\r\n    return (\r\n      <div className=\"min-h-screen flex w-full\">\r\n        <div className=\"flex-1 flex items-center justify-center p-8 lg:p-12 bg-background\">\r\n          <div className=\"w-full max-w-md space-y-6 text-center animate-fade-in\">\r\n            <div className=\"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4\">\r\n              <Mail className=\"h-8 w-8 text-primary\" />\r\n            </div>\r\n            <h2 className=\"text-3xl font-serif font-bold tracking-tight text-primary\">Check your inbox</h2>\r\n            <p className=\"text-muted-foreground font-light text-lg\">\r\n              We've sent a confirmation link to <span className=\"font-medium text-foreground\">{formData.email || formData.business_email}</span>.\r\n            </p>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              Please verify your account to complete your registration and log in.\r\n            </p>\r\n            <div className=\"pt-6\">\r\n              <Button asChild variant=\"outline\" className=\"w-full h-12\">\r\n                <Link to=\"/auth\">\r\n                  <ArrowLeft className=\"mr-2 h-4 w-4\" /> Back to Login\r\n                </Link>\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* Visual Side */}\r\n        <div className=\"hidden lg:flex lg:w-1/2 relative bg-[#1A2F25] overflow-hidden\">\r\n          <div className=\"absolute inset-0 bg-cover bg-center\" style={{ backgroundImage: \"url('https://images.unsplash.com/photo-1596394516093-501ba68a0ba6?q=80&w=2670&auto=format&fit=crop')\" }} />\r\n          <div className=\"absolute inset-0 bg-black/20 backdrop-blur-[1px]\" />\r\n          <div className=\"absolute inset-0 bg-gradient-to-t from-[#1A2F25] via-transparent to-transparent\" />\r\n          <div className=\"absolute inset-0 bg-gradient-to-r from-black/40 to-transparent\" />\r\n          <div className=\"relative z-10 p-16 flex flex-col justify-between h-full text-white\">\r\n            <Link to=\"/\" className=\"text-2xl font-serif font-bold tracking-tight text-white/90\">Chaka Stays</Link>\r\n            <div className=\"space-y-6 max-w-lg mb-20\">\r\n              <h1 className=\"text-5xl font-serif font-medium leading-tight\">Almost there...</h1>\r\n              <p className=\"text-lg text-white/80 font-light leading-relaxed\">\r\n                Your journey with Chaka Stays is just one click away.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex w-full\">\r\n      {/* Form Side */}\r\n      <div className=\"flex-1 flex items-center justify-center p-4 md:p-8 lg:p-12 bg-background overflow-y-auto\">\r\n        <div className=\"w-full max-w-md space-y-8 animate-fade-in py-8\">\r\n          <div className=\"text-center space-y-2\">\r\n            <h2 className=\"text-3xl font-serif font-bold tracking-tight text-primary\">Begin Your Journey</h2>\r\n            <p className=\"text-muted-foreground font-light\">Create your account to start exploring or hosting</p>\r\n          </div>\r\n\r\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            {/* User Type Selection */}\r\n            <Tabs value={userType} className=\"w-full\" onValueChange={handleUserTypeChange}>\r\n              <TabsList className=\"grid w-full grid-cols-2 mb-8 h-12 bg-muted/50 p-1 rounded-xl\">\r\n                <TabsTrigger value=\"guest\" className=\"h-10 rounded-lg data-[state=active]:bg-white data-[state=active]:text-primary data-[state=active]:shadow-sm transition-all font-medium\">\r\n                  <User className=\"w-4 h-4 mr-2\" />\r\n                  Traveler\r\n                </TabsTrigger>\r\n                <TabsTrigger value=\"host\" className=\"h-10 rounded-lg data-[state=active]:bg-white data-[state=active]:text-primary data-[state=active]:shadow-sm transition-all font-medium\">\r\n                  <Home className=\"w-4 h-4 mr-2\" />\r\n                  Property Owner\r\n                </TabsTrigger>\r\n              </TabsList>\r\n\r\n              <TabsContent value=\"guest\" className=\"animate-fade-in mt-0 space-y-4\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"full_name\">Full Name</Label>\r\n                    <Input\r\n                      id=\"full_name\"\r\n                      name=\"full_name\"\r\n                      type=\"text\"\r\n                      placeholder=\"e.g. John Doe\"\r\n                      value={formData.full_name}\r\n                      onChange={handleChange}\r\n                      className=\"h-11 bg-white/50 border-input/60 focus:border-primary focus:ring-primary/10 transition-all font-light\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"phone\">Phone</Label>\r\n                    <Input\r\n                      id=\"phone\"\r\n                      name=\"phone\"\r\n                      type=\"tel\"\r\n                      placeholder=\"+254 7...\"\r\n                      value={formData.phone}\r\n                      onChange={handleChange}\r\n                      className=\"h-11 bg-white/50 border-input/60 focus:border-primary focus:ring-primary/10 transition-all font-light\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"email\">Email Address</Label>\r\n                  <Input\r\n                    id=\"email\"\r\n                    name=\"email\"\r\n                    type=\"email\"\r\n                    placeholder=\"name@example.com\"\r\n                    value={formData.email}\r\n                    onChange={handleChange}\r\n                    className=\"h-11 bg-white/50 border-input/60 focus:border-primary focus:ring-primary/10 transition-all font-light\"\r\n                  />\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"password\">Create Password</Label>\r\n                  <Input\r\n                    id=\"password\"\r\n                    name=\"password\"\r\n                    type=\"password\"\r\n                    placeholder=\"At least 8 characters\"\r\n                    value={formData.password}\r\n                    onChange={handleChange}\r\n                    className=\"h-11 bg-white/50 border-input/60 focus:border-primary focus:ring-primary/10 transition-all font-light\"\r\n                  />\r\n                </div>\r\n              </TabsContent>\r\n\r\n              <TabsContent value=\"host\" className=\"animate-fade-in mt-0 space-y-4\">\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"business_name\">Business Name</Label>\r\n                  <Input\r\n                    id=\"business_name\"\r\n                    name=\"business_name\"\r\n                    type=\"text\"\r\n                    placeholder=\"e.g. Safari Stays Ltd\"\r\n                    value={formData.business_name}\r\n                    onChange={handleChange}\r\n                    className=\"h-11 bg-white/50 border-input/60 focus:border-primary focus:ring-primary/10 transition-all font-light\"\r\n                  />\r\n                </div>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"owner_name\">Owner Name</Label>\r\n                    <Input\r\n                      id=\"owner_name\"\r\n                      name=\"owner_name\"\r\n                      type=\"text\"\r\n                      placeholder=\"Full Name\"\r\n                      value={formData.owner_name}\r\n                      onChange={handleChange}\r\n                      className=\"h-11 bg-white/50\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"business_phone\">Business Phone</Label>\r\n                    <Input\r\n                      id=\"business_phone\"\r\n                      name=\"business_phone\"\r\n                      type=\"tel\"\r\n                      placeholder=\"+254 7...\"\r\n                      value={formData.business_phone}\r\n                      onChange={handleChange}\r\n                      className=\"h-11 bg-white/50\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"business_email\">Business Email</Label>\r\n                  <Input\r\n                    id=\"business_email\"\r\n                    name=\"business_email\"\r\n                    type=\"email\"\r\n                    placeholder=\"host@business.com\"\r\n                    value={formData.business_email}\r\n                    onChange={handleChange}\r\n                    className=\"h-11 bg-white/50 border-input/60 focus:border-primary focus:ring-primary/10\"\r\n                  />\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"host-password\">Create Password</Label>\r\n                  <Input\r\n                    id=\"host-password\"\r\n                    name=\"password\"\r\n                    type=\"password\"\r\n                    placeholder=\"At least 8 characters\"\r\n                    value={formData.password}\r\n                    onChange={handleChange}\r\n                    className=\"h-11 bg-white/50 border-input/60 focus:border-primary focus:ring-primary/10 transition-all font-light\"\r\n                  />\r\n                </div>\r\n              </TabsContent>\r\n            </Tabs>\r\n\r\n            <Button\r\n              type=\"submit\"\r\n              className=\"w-full h-12 bg-primary hover:bg-primary/90 text-white font-medium shadow-lg shadow-primary/20 transition-all hover:scale-[1.01]\"\r\n              disabled={isLoading}\r\n            >\r\n              {isLoading ? (\r\n                <>\r\n                  <Loader2 className=\"mr-2 h-5 w-5 animate-spin\" />\r\n                  Creating Account...\r\n                </>\r\n              ) : (\r\n                'Create Account'\r\n              )}\r\n            </Button>\r\n\r\n          </form>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Visual Side */}\r\n      <div className=\"hidden lg:flex lg:w-1/2 relative bg-[#1A2F25] overflow-hidden\">\r\n        <div\r\n          className=\"absolute inset-0 bg-cover bg-center\"\r\n          style={{ backgroundImage: \"url('https://images.unsplash.com/photo-1596394516093-501ba68a0ba6?q=80&w=2670&auto=format&fit=crop')\" }}\r\n        />\r\n        <div className=\"absolute inset-0 bg-black/20 backdrop-blur-[1px]\" />\r\n        <div className=\"absolute inset-0 bg-gradient-to-t from-[#1A2F25] via-transparent to-transparent\" />\r\n        <div className=\"absolute inset-0 bg-gradient-to-r from-black/40 to-transparent\" />\r\n\r\n        <div className=\"relative z-10 p-16 flex flex-col justify-between h-full text-white\">\r\n          <Link to=\"/\" className=\"text-2xl font-serif font-bold tracking-tight text-white/90\">Chaka Stays</Link>\r\n          <div className=\"space-y-6 max-w-lg mb-20\">\r\n            <h1 className=\"text-5xl font-serif font-medium leading-tight\">Join our unique <br />community.</h1>\r\n            <p className=\"text-lg text-white/80 font-light leading-relaxed\">\r\n              Whether you're seeking a serene escape or listing a hidden gem, Chaka Stays connects you with authentic experiences.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignUp;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\services\\api.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":68,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1636,1639],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1636,1639],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":84,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2096,2099],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2096,2099],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { supabase } from '@/lib/supabase';\r\nimport { toast } from 'sonner';\r\n\r\nexport interface Property {\r\n    id: string;\r\n    host_id: string;\r\n    title: string;\r\n    description: string;\r\n    location: string;\r\n    price_per_night: number;\r\n    max_guests: number;\r\n    bedrooms: number;\r\n    beds: number;\r\n    baths: number;\r\n    amenities: string[];\r\n    images: string[];\r\n    property_type?: string;\r\n    is_banned?: boolean;\r\n    rating: number;\r\n    review_count: number;\r\n    created_at: string;\r\n    host?: {\r\n        id: string;\r\n        full_name: string;\r\n        avatar_url: string;\r\n    };\r\n}\r\n\r\nexport interface Booking {\r\n    id: string;\r\n    property_id: string;\r\n    guest_id: string;\r\n    check_in: string;\r\n    check_out: string;\r\n    total_price: number;\r\n    status: 'pending' | 'confirmed' | 'cancelled';\r\n    created_at: string;\r\n    properties?: Property; // Join result\r\n}\r\n\r\nexport interface Review {\r\n    id: string;\r\n    property_id: string;\r\n    user_id: string;\r\n    rating: number;\r\n    comment: string;\r\n    created_at: string;\r\n    user?: {\r\n        full_name: string;\r\n        avatar_url: string;\r\n    };\r\n}\r\n\r\nconst timeout = (ms: number) => new Promise((_, reject) => setTimeout(() => reject(new Error('Request timed out')), ms));\r\n\r\nexport const api = {\r\n    // --- Properties ---\r\n\r\n    async getProperties() {\r\n        const fetchPromise = supabase\r\n            .from('properties')\r\n            .select('*')\r\n            .order('created_at', { ascending: false });\r\n\r\n        const { data, error } = await Promise.race([\r\n            fetchPromise,\r\n            timeout(10000)\r\n        ]) as any;\r\n\r\n        if (error) throw error;\r\n        return data as Property[];\r\n    },\r\n\r\n    async getFeaturedProperties() {\r\n        // For now, just getting the first 3. In real app, could filter by rating > 4.5\r\n        const fetchPromise = supabase\r\n            .from('properties')\r\n            .select('*')\r\n            .limit(3);\r\n\r\n        const { data, error } = await Promise.race([\r\n            fetchPromise,\r\n            timeout(10000)\r\n        ]) as any;\r\n\r\n        if (error) throw error;\r\n        return data as Property[];\r\n    },\r\n\r\n    // ... rest of the file (keep existing methods)\r\n\r\n    async getProperty(id: string) {\r\n        const { data, error } = await supabase\r\n            .from('properties')\r\n            .select(`\r\n        *,\r\n        host:profiles(id, full_name, avatar_url) \r\n      `)\r\n            .eq('id', id)\r\n            .single();\r\n\r\n        if (error) throw error;\r\n        return data;\r\n    },\r\n\r\n    async getHostProperties(hostId: string) {\r\n        const { data, error } = await supabase\r\n            .from('properties')\r\n            .select('*')\r\n            .eq('host_id', hostId);\r\n\r\n        if (error) throw error;\r\n        return data as Property[];\r\n    },\r\n\r\n    async createProperty(property: Omit<Property, 'id' | 'created_at' | 'rating' | 'review_count'>) {\r\n        const { data, error } = await supabase\r\n            .from('properties')\r\n            .insert(property)\r\n            .select()\r\n            .single();\r\n\r\n        if (error) throw error;\r\n        return data;\r\n    },\r\n\r\n    async updateProperty(id: string, updates: Partial<Property>) {\r\n        const { data, error } = await supabase\r\n            .from('properties')\r\n            .update(updates)\r\n            .eq('id', id)\r\n            .select()\r\n            .single();\r\n\r\n        if (error) throw error;\r\n        return data;\r\n    },\r\n\r\n    async deleteProperty(id: string) {\r\n        const { error } = await supabase\r\n            .rpc('delete_property_secure', { p_id: id });\r\n\r\n        if (error) throw error;\r\n    },\r\n\r\n    // --- Bookings ---\r\n\r\n    async getUserBookings(userId: string) {\r\n        const { data, error } = await supabase\r\n            .from('bookings')\r\n            .select(`\r\n        *,\r\n        properties:properties(*)\r\n      `)\r\n            .eq('guest_id', userId)\r\n            .order('created_at', { ascending: false });\r\n\r\n        if (error) throw error;\r\n        return data as Booking[];\r\n    },\r\n\r\n    async getHostBookings(hostId: string) {\r\n        const { data, error } = await supabase\r\n            .from('bookings')\r\n            .select(`\r\n                *,\r\n                properties!inner(*)\r\n            `)\r\n            .eq('properties.host_id', hostId)\r\n            .neq('status', 'cancelled')\r\n            .order('created_at', { ascending: false });\r\n\r\n        if (error) throw error;\r\n        return data as Booking[];\r\n    },\r\n\r\n    async getPropertyBookings(propertyId: string) {\r\n        // Fetch Bookings\r\n        const { data: bookings, error: bookingsError } = await supabase\r\n            .from('bookings')\r\n            .select('check_in, check_out')\r\n            .eq('property_id', propertyId)\r\n            .neq('status', 'cancelled')\r\n            .gte('check_out', new Date().toISOString().split('T')[0]);\r\n\r\n        if (bookingsError) throw bookingsError;\r\n\r\n        // Fetch Blocked Dates\r\n        const { data: blocks, error: blocksError } = await supabase\r\n            .from('blocked_dates')\r\n            .select('start_date, end_date')\r\n            .eq('property_id', propertyId)\r\n            .gte('end_date', new Date().toISOString().split('T')[0]);\r\n\r\n        if (blocksError) throw blocksError;\r\n\r\n        // Normalize data structure\r\n        const bookingDates = (bookings || []).map(b => ({ check_in: b.check_in, check_out: b.check_out, type: 'booking' }));\r\n        const blockedDates = (blocks || []).map(b => ({ check_in: b.start_date, check_out: b.end_date, type: 'blocked' }));\r\n\r\n        return [...bookingDates, ...blockedDates];\r\n    },\r\n\r\n    async checkAvailability(propertyId: string, checkIn: Date, checkOut: Date) {\r\n        const { data, error } = await supabase\r\n            .rpc('check_availability', {\r\n                property_id: propertyId,\r\n                check_in_date: checkIn.toISOString().split('T')[0],\r\n                check_out_date: checkOut.toISOString().split('T')[0]\r\n            });\r\n\r\n        if (error) throw error;\r\n        return data as boolean;\r\n    },\r\n\r\n    async cancelBooking(bookingId: string) {\r\n        const { error } = await supabase\r\n            .rpc('cancel_booking_secure', { booking_id: bookingId });\r\n\r\n        if (error) throw error;\r\n    },\r\n\r\n    // --- Blocked Dates (Calendar) ---\r\n\r\n    async blockDates(block: { property_id: string; start_date: Date; end_date: Date; reason?: string }) {\r\n        const { data, error } = await supabase\r\n            .from('blocked_dates')\r\n            .insert({\r\n                property_id: block.property_id,\r\n                start_date: block.start_date.toISOString(),\r\n                end_date: block.end_date.toISOString(),\r\n                reason: block.reason\r\n            })\r\n            .select()\r\n            .single();\r\n\r\n        if (error) throw error;\r\n        return data;\r\n    },\r\n\r\n    async removeBlock(blockId: string) {\r\n        const { error } = await supabase\r\n            .from('blocked_dates')\r\n            .delete()\r\n            .eq('id', blockId);\r\n\r\n        if (error) throw error;\r\n    },\r\n\r\n    async getBlockedDates(propertyId: string) {\r\n        const { data, error } = await supabase\r\n            .from('blocked_dates')\r\n            .select('*')\r\n            .eq('property_id', propertyId);\r\n\r\n        if (error) throw error;\r\n        return data as { id: string; start_date: string; end_date: string; reason?: string }[];\r\n    },\r\n\r\n    async createBooking(booking: {\r\n        property_id: string;\r\n        guest_id: string;\r\n        check_in: Date;\r\n        check_out: Date;\r\n        total_price: number;\r\n    }) {\r\n        // 1. Safety Check: Is property banned?\r\n        const { data: property, error: propError } = await supabase\r\n            .from('properties')\r\n            .select('is_banned')\r\n            .eq('id', booking.property_id)\r\n            .single();\r\n\r\n        if (propError || !property) throw new Error(\"Property not found\");\r\n        if (property.is_banned) throw new Error(\"This property is no longer accepting bookings.\");\r\n\r\n        // 2. Proceed with booking\r\n        const { data, error } = await supabase\r\n            .from('bookings')\r\n            .insert({\r\n                ...booking,\r\n                status: 'confirmed'\r\n            })\r\n            .select()\r\n            .single();\r\n\r\n        if (error) throw error;\r\n        return data;\r\n    },\r\n\r\n    // --- Reviews ---\r\n\r\n    async getReviews(propertyId: string) {\r\n        const { data, error } = await supabase\r\n            .from('reviews')\r\n            .select(`\r\n                *,\r\n                user:profiles(full_name, avatar_url)\r\n            `)\r\n            .eq('property_id', propertyId)\r\n            .order('created_at', { ascending: false });\r\n\r\n        if (error) throw error;\r\n        return data as Review[];\r\n    },\r\n\r\n    async createReview(review: { property_id: string; user_id: string; rating: number; comment: string }) {\r\n        const { data, error } = await supabase\r\n            .from('reviews')\r\n            .insert(review)\r\n            .select()\r\n            .single();\r\n\r\n        if (error) throw error;\r\n        return data;\r\n    },\r\n\r\n    async updateProfile(userId: string, updates: { full_name?: string; phone?: string; avatar_url?: string }) {\r\n        const { data, error } = await supabase\r\n            .from('profiles')\r\n            .update(updates)\r\n            .eq('id', userId)\r\n            .select()\r\n            .single();\r\n\r\n        if (error) throw error;\r\n        return data;\r\n    },\r\n\r\n    async uploadAvatar(file: File) {\r\n        const fileExt = file.name.split('.').pop();\r\n        const fileName = `avatar_${Math.random().toString(36).substring(2)}_${Date.now()}.${fileExt}`;\r\n        const filePath = `${fileName}`;\r\n\r\n        const { error: uploadError } = await supabase.storage\r\n            .from('avatars')\r\n            .upload(filePath, file);\r\n\r\n        if (uploadError) {\r\n            // If avatars bucket doesn't exist, try property-images as fallback or handle error\r\n            console.error('Avatar upload error:', uploadError);\r\n            throw uploadError;\r\n        }\r\n\r\n        const { data } = supabase.storage\r\n            .from('avatars')\r\n            .getPublicUrl(filePath);\r\n\r\n        return data.publicUrl;\r\n    },\r\n\r\n    // --- Storage ---\r\n\r\n    async uploadImage(file: File) {\r\n        const fileExt = file.name.split('.').pop();\r\n        const fileName = `${Math.random().toString(36).substring(2)}_${Date.now()}.${fileExt}`;\r\n        const filePath = `${fileName}`;\r\n\r\n        const { error: uploadError } = await supabase.storage\r\n            .from('property-images')\r\n            .upload(filePath, file);\r\n\r\n        if (uploadError) {\r\n            console.error('Supabase Storage Error:', uploadError);\r\n            throw uploadError;\r\n        }\r\n\r\n        const { data } = supabase.storage\r\n            .from('property-images')\r\n            .getPublicUrl(filePath);\r\n\r\n        return data.publicUrl;\r\n    },\r\n\r\n    // --- Favorites ---\r\n\r\n    async getFavoriteStatus(propertyId: string, userId: string) {\r\n        const { data, error } = await supabase\r\n            .from('favorites')\r\n            .select('id')\r\n            .eq('property_id', propertyId)\r\n            .eq('user_id', userId)\r\n            .maybeSingle();\r\n\r\n        if (error) throw error;\r\n        return !!data;\r\n    },\r\n\r\n    async addFavorite(propertyId: string, userId: string) {\r\n        const { error } = await supabase\r\n            .from('favorites')\r\n            .insert({ property_id: propertyId, user_id: userId });\r\n\r\n        if (error) throw error;\r\n    },\r\n\r\n    async removeFavorite(propertyId: string, userId: string) {\r\n        const { error } = await supabase\r\n            .from('favorites')\r\n            .delete()\r\n            .eq('property_id', propertyId)\r\n            .eq('user_id', userId);\r\n\r\n        if (error) throw error;\r\n    },\r\n\r\n    async getUserFavorites(userId: string) {\r\n        const { data, error } = await supabase\r\n            .from('favorites')\r\n            .select(`\r\n                property_id,\r\n                property:properties(*)\r\n            `)\r\n            .eq('user_id', userId)\r\n            .order('created_at', { ascending: false });\r\n\r\n        if (error) throw error;\r\n        // Map to return just the property objects\r\n        return data.map(f => f.property) as unknown as Property[];\r\n    },\r\n\r\n    // --- Admin ---\r\n\r\n    async isAdmin(userId: string) {\r\n        const { data, error } = await supabase\r\n            .from('profiles')\r\n            .select('is_admin')\r\n            .eq('id', userId)\r\n            .single();\r\n\r\n        if (error) return false;\r\n        return data?.is_admin || false;\r\n    },\r\n\r\n    async getAdminStats() {\r\n        const { data, error } = await supabase.rpc('get_admin_stats');\r\n\r\n        if (error) {\r\n            console.error('Admin Stats RPC Error:', error);\r\n            // SHOW THE USER why it failed\r\n            toast.error(`Admin Stats Error: ${error.message}`);\r\n            return { users: 0, properties: 0, bookings: 0, revenue: 0 };\r\n        }\r\n\r\n        return {\r\n            users: data.users || 0,\r\n            properties: data.properties || 0,\r\n            bookings: data.bookings || 0,\r\n            revenue: data.revenue || 0\r\n        };\r\n    },\r\n\r\n    async toggleBanProperty(id: string, banStatus: boolean) {\r\n        const { error } = await supabase.rpc('toggle_ban_property', {\r\n            p_id: id,\r\n            ban_status: banStatus\r\n        });\r\n\r\n        if (error) throw error;\r\n    },\r\n\r\n    async getAllUsers() {\r\n        const { data, error } = await supabase\r\n            .from('profiles')\r\n            .select('*')\r\n            .order('created_at', { ascending: false });\r\n\r\n        if (error) throw error;\r\n        return data;\r\n    },\r\n\r\n    // --- Notifications ---\r\n\r\n    async getNotifications() {\r\n        const { data, error } = await supabase\r\n            .from('notifications')\r\n            .select('*')\r\n            .order('created_at', { ascending: false });\r\n\r\n        if (error) throw error;\r\n        return data;\r\n    },\r\n\r\n    async markNotificationRead(id: string) {\r\n        const { error } = await supabase\r\n            .from('notifications')\r\n            .update({ is_read: true })\r\n            .eq('id', id);\r\n\r\n        if (error) throw error;\r\n    },\r\n\r\n    // --- Payments (Simulation) ---\r\n\r\n    async processMpesaPayment(phoneNumber: string, amount: number) {\r\n        // Simulate network delay for STK Push\r\n        await new Promise(resolve => setTimeout(resolve, 3000));\r\n\r\n        // Simulate success (90% chance)\r\n        // In a real app, this would be a backend polling mechanism checking for a callback\r\n        const isSuccess = Math.random() > 0.1;\r\n\r\n        if (!isSuccess) {\r\n            throw new Error(\"Payment failed or was cancelled by user.\");\r\n        }\r\n\r\n        return {\r\n            success: true,\r\n            receipt: `MPS${Math.random().toString(36).substring(2, 10).toUpperCase()}`,\r\n            timestamp: new Date().toISOString()\r\n        };\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\services\\authService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\tailwind.config.ts","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":91,"column":12,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":91,"endColumn":42}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { Config } from \"tailwindcss\";\n\nexport default {\n\tdarkMode: [\"class\"],\n\tcontent: [\n\t\t\"./pages/**/*.{ts,tsx}\",\n\t\t\"./components/**/*.{ts,tsx}\",\n\t\t\"./app/**/*.{ts,tsx}\",\n\t\t\"./src/**/*.{ts,tsx}\",\n\t],\n\tprefix: \"\",\n\ttheme: {\n\t\tcontainer: {\n\t\t\tcenter: true,\n\t\t\tpadding: '2rem',\n\t\t\tscreens: {\n\t\t\t\t'2xl': '1400px'\n\t\t\t}\n\t\t},\n\t\textend: {\n\t\t\tfontFamily: {\n\t\t\t\tsans: ['Outfit', 'sans-serif'],\n\t\t\t\tserif: ['Playfair Display', 'serif'],\n\t\t\t},\n\t\t\tcolors: {\n\t\t\t\tborder: 'hsl(var(--border))',\n\t\t\t\tinput: 'hsl(var(--input))',\n\t\t\t\tring: 'hsl(var(--ring))',\n\t\t\t\tbackground: 'hsl(var(--background))',\n\t\t\t\tforeground: 'hsl(var(--foreground))',\n\t\t\t\tprimary: {\n\t\t\t\t\tDEFAULT: 'hsl(var(--primary))',\n\t\t\t\t\tforeground: 'hsl(var(--primary-foreground))'\n\t\t\t\t},\n\t\t\t\tsecondary: {\n\t\t\t\t\tDEFAULT: 'hsl(var(--secondary))',\n\t\t\t\t\tforeground: 'hsl(var(--secondary-foreground))'\n\t\t\t\t},\n\t\t\t\tdestructive: {\n\t\t\t\t\tDEFAULT: 'hsl(var(--destructive))',\n\t\t\t\t\tforeground: 'hsl(var(--destructive-foreground))'\n\t\t\t\t},\n\t\t\t\tmuted: {\n\t\t\t\t\tDEFAULT: 'hsl(var(--muted))',\n\t\t\t\t\tforeground: 'hsl(var(--muted-foreground))'\n\t\t\t\t},\n\t\t\t\taccent: {\n\t\t\t\t\tDEFAULT: 'hsl(var(--accent))',\n\t\t\t\t\tforeground: 'hsl(var(--accent-foreground))'\n\t\t\t\t},\n\t\t\t\tpopover: {\n\t\t\t\t\tDEFAULT: 'hsl(var(--popover))',\n\t\t\t\t\tforeground: 'hsl(var(--popover-foreground))'\n\t\t\t\t},\n\t\t\t\tcard: {\n\t\t\t\t\tDEFAULT: 'hsl(var(--card))',\n\t\t\t\t\tforeground: 'hsl(var(--card-foreground))'\n\t\t\t\t}\n\t\t\t},\n\t\t\tborderRadius: {\n\t\t\t\tlg: 'var(--radius)',\n\t\t\t\tmd: 'calc(var(--radius) - 2px)',\n\t\t\t\tsm: 'calc(var(--radius) - 4px)'\n\t\t\t},\n\t\t\tkeyframes: {\n\t\t\t\t'accordion-down': {\n\t\t\t\t\tfrom: { height: '0' },\n\t\t\t\t\tto: { height: 'var(--radix-accordion-content-height)' }\n\t\t\t\t},\n\t\t\t\t'accordion-up': {\n\t\t\t\t\tfrom: { height: 'var(--radix-accordion-content-height)' },\n\t\t\t\t\tto: { height: '0' }\n\t\t\t\t},\n\t\t\t\t'fade-in': {\n\t\t\t\t\tfrom: { opacity: '0', transform: 'translateY(10px)' },\n\t\t\t\t\tto: { opacity: '1', transform: 'translateY(0)' }\n\t\t\t\t},\n\t\t\t\t'slide-in-right': {\n\t\t\t\t\tfrom: { transform: 'translateX(100%)' },\n\t\t\t\t\tto: { transform: 'translateX(0)' }\n\t\t\t\t}\n\t\t\t},\n\t\t\tanimation: {\n\t\t\t\t'accordion-down': 'accordion-down 0.2s ease-out',\n\t\t\t\t'accordion-up': 'accordion-up 0.2s ease-out',\n\t\t\t\t'fade-in': 'fade-in 0.6s ease-out forwards',\n\t\t\t\t'slide-in-right': 'slide-in-right 0.4s ease-out'\n\t\t\t}\n\t\t}\n\t},\n\tplugins: [require(\"tailwindcss-animate\")],\n} satisfies Config;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dennis Wangari\\Documents\\chaka-stays-main\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]